{"version":3,"file":"index.js","mappings":"yBACA,IAAIA,EAAsB,CAAC,ECD3BA,EAAoBC,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOC,MAAQ,IAAIC,SAAS,cAAb,EAChB,CAAE,MAAOC,GACR,GAAsB,iBAAXC,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAT,MAAMC,UAAkCC,GAAGC,UACtDC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKW,KAAKN,GAAGQ,QAAS,SAAU,IAChCb,KAAKc,MAAM,YAAaT,GAAGU,iBAC/B,CAEAC,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,kBAAmBf,OAAOgB,kBAC/BnB,KAAKoB,eAAiC,KAAhBpB,KAAKqB,SAC3BrB,KAAKsB,SAAW,IAAIH,iBAAiBnB,KAAKqB,QAC1CrB,KAAKsB,SAASC,iBAAiB,WAAWT,IACtCd,KAAKwB,KAAK,YAAa,CAACV,EAAMW,MAAM,IAGhD,CAEAC,WAAAA,CAAYC,GACR3B,KAAKsB,SAASI,YAAYC,EAC9B,ECrBG,SAASC,EAASC,GACrB,OAAO,IAAIC,SAAQ,CAACC,EAASC,KACzB,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,IAAMJ,EAAQE,EAAOG,QACrCH,EAAOI,QAAU,IAAML,EAAOC,EAAOK,OACrCL,EAAOM,cAAcV,EAAK,GAElC,CCPOW,eAAeC,EAAgBC,EAAUC,EAAMC,EAAU9B,GAC5D,IACI,MAAMsB,QAAeS,UAAUC,YAAYC,MAAM,CAAEJ,SAQnD,OAPAD,EAASxB,IAAI0B,EAAUR,EAAOY,OAASZ,EAAOa,QAC1CnC,IACAsB,EAAOc,SAAW,KACdR,EAASxB,IAAI0B,EAAUR,EAAOY,OAASZ,EAAOa,QAC9CP,EAASlB,KAAKV,EAAM,GAGrBsB,EAAOY,OAASZ,EAAOa,MAClC,CAAE,MAAOX,GACLI,EAASlB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAChD,CACJ,CCXe,MAAMC,UAAkB/C,GAAGC,UACtCC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKW,KAAKN,GAAGQ,QAAS,mBAAoB,IAC1Cb,KAAKW,KAAKN,GAAGQ,QAAS,oBAAqB,IAC3Cb,KAAKc,MAAM,0BACXd,KAAKc,MAAM,2BACXd,KAAKc,MAAM,SAAUT,GAAGU,iBAAkB,eAC1Cf,KAAKc,MAAM,cACXd,KAAKc,MAAM,WACXd,KAAKc,MAAM,eACXd,KAAKc,MAAM,UACf,CAEAE,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,cAAe2B,WACrC7C,KAAKoB,eAAiB,gBAAiByB,YACvCJ,EAAgBzC,KAAM,iBAAkB,mBAAoB,0BAC5DyC,EAAgBzC,KAAM,kBAAmB,oBAAqB,2BAEtE,CAEA,UAAMqD,GACF,MAAMC,QAAcT,UAAUU,UAAUF,OAClC5B,QAAaK,QAAQ0B,IACvBF,EAAMG,KAAIC,GAAQ5B,QAAQ0B,IACtBE,EAAKC,MAAMF,KAAIjB,SAEJZ,QADY8B,EAAKE,QAAQC,UAK5C7D,KAAK8D,OAAO,CACRC,OAAQ,SACRC,YAAavC,GAErB,CAEA,cAAMwC,GACF,IACI,MAAMC,QAAarB,UAAUU,UAAUU,WACvCjE,KAAKwB,KAAK,aAAc,CAAC0C,GAC7B,CAAE,MAAO5B,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,CAEA,WAAMgB,CAAMC,GACR,IACI,MAAMC,QAAiBC,MAAMF,GACvBvC,QAAawC,EAASxC,OACtBJ,EAAO,CAAC,IAAI8C,cAAc,CAAE,CAAC1C,EAAKgC,MAAOhC,WACzCgB,UAAUU,UAAUY,MAAM1C,GAChCzB,KAAKwB,KAAK,UACd,CAAE,MAAOc,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,CAEA,eAAMqB,CAAUN,GACZ,UACUrB,UAAUU,UAAUiB,UAAUN,GACpClE,KAAKwB,KAAK,cACd,CAAE,MAAOc,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,ECvEW,MAAMsB,UAAsBpE,GAAGC,UAC1CC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKW,KAAKN,GAAGQ,QAAS,wBAAyB,IAC/Cb,KAAKc,MAAM,WAAYT,GAAGU,iBAC9B,CAEA,YAAMC,CAAOC,GAGT,GAFAP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,aAAc2B,WACpC7C,KAAKoB,cAAe,CACpB,MAAMsD,QAAmB7B,UAAU8B,SAASC,gBAC5C5E,KAAKkB,IAAI,wBAAyBwD,EAAWG,KAAK,KACtD,CACJ,CAEA,YAAMC,GACF,MAAMC,EAAS/E,KAAKgF,aACd5C,QAAeS,UAAU8B,SAASG,OACpCC,EAAOE,YACP,CAAEC,SAAUH,EAAOI,YAEvBnF,KAAKwB,KAAK,WAAY,CAAC4D,KAAKC,UAAUjD,IAC1C,ECxBW,MAAMkD,UAA6BjF,GAAGC,UACjDC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKc,MAAM,eAAgBT,GAAGU,iBAAkB,qBAChDf,KAAKc,MAAM,aACXd,KAAKc,MAAM,UACf,CAEAE,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiBf,OAAOoF,oBAAsBpF,OAAOqF,oBAClE,CAEA,mBAAMC,GACF,MAAMC,EAAU1F,KAAKgF,aACfW,QAAU9C,UAAU+C,YAAYC,IAAIH,GAEpCI,EAAa,CACfC,GAAIJ,EAAEI,GACNlC,KAAM8B,EAAE9B,KACRmC,QAASL,EAAEK,QACXrD,KAAMgD,EAAEhD,KACRsD,SAAUN,EAAEM,SACZC,SAAUP,EAAEO,SACZC,SAAUR,EAAEQ,UAEhBnG,KAAK8D,OAAO,CAAEC,OAAQ,eAAgBC,YAAa8B,GACvD,CAEA,OAAM,CAAOJ,GACT,IACI,MAAMI,QAAmBjD,UAAU+C,YAAY5E,OAAO0E,GACtDU,QAAQC,IAAI,CAAEP,eACVA,SACMjD,UAAU+C,YAAYU,MAAMR,GAClC9F,KAAKwB,KAAK,cAEVxB,KAAKwB,KAAK,UAAW,CAAC,0BAA2B,sDAEzD,CAAE,MAAOc,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,CAEAoD,aAAAA,CAAcR,EAAIpD,EAAMqD,EAASC,GAC7B,MAAMP,EAAU,CACZO,SAAU,CACNF,KACApD,KAAMA,QAAQ6D,EACdR,QAASA,QAAWQ,EACpBP,aAGRjG,MAAK,EAAO0F,EAChB,CAEAe,cAAAA,CAAeV,EAAIpD,EAAMqD,EAASE,EAAUC,GACxC,MAAMT,EAAU,CACZgB,UAAW,CACPX,KACApD,KAAMA,QAAQ6D,EACdR,QAASA,QAAWQ,EACpBN,WACAC,SAAUA,QAAYK,IAG9BxG,MAAK,EAAO0F,EAChB,CAEA,yBAAMiB,GACF,UACU9D,UAAU+C,YAAYe,sBAC5B3G,KAAKwB,KAAK,YACd,CAAE,MAAOc,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,EC7EW,MAAMyD,UAA4BvG,GAAGC,UAChDC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKc,MAAM,WAAYT,GAAGU,kBAC1Bf,KAAK6G,iBAAmB,IAAIC,eAChC,CAEA9F,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,kBAAmBf,OAAO4G,WACvC,CAEA,UAAMC,GACF,MAAM5E,QAAe,IAAI2E,YAAaC,KAAK,CAAEC,OAAQjH,KAAK6G,iBAAiBI,SAC3EjH,KAAKwB,KAAK,WAAY,CAACY,EAAO8E,SAClC,CAEAC,KAAAA,GACInH,KAAK6G,iBAAiBM,OAC1B,ECpBW,MAAMC,UAAmB/G,GAAGC,UACvCC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKc,MAAM,qBAAsBT,GAAGU,kBACpCf,KAAKc,MAAM,oBAAqBT,GAAGU,iBACvC,CAEA,mBAAOsG,CAAaC,GAChB,OAAIA,EAAIC,QAAQC,MACLF,EAAIC,QAAQC,MAEnBF,EAAIG,cACGL,EAAWC,aAAaC,EAAIG,oBADvC,CAGJ,CAEAzG,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiBwG,SAASC,mBAC/B3H,KAAKoB,gBACLf,GAAGuH,IAAIC,GAAG,mBAAoBH,SAAU1H,KAAK8H,mBAAoB9H,MACjEK,GAAGuH,IAAIC,GAAG,kBAAmBH,SAAU1H,KAAK+H,kBAAmB/H,MAEvE,CAEAgI,OAAAA,GACI3H,GAAGuH,IAAIK,IAAI,mBAAoBP,SAAU1H,KAAK8H,mBAAoB9H,MAClEK,GAAGuH,IAAIK,IAAI,kBAAmBP,SAAU1H,KAAK+H,kBAAmB/H,MAChEU,MAAMsH,SACV,CAEAE,cAAAA,GACIR,SAASQ,gBACb,CAEA,uBAAMC,CAAkBC,GACpB,MAAMd,EAAMtH,KAAKqI,YAAYC,QAAQF,GACjCd,UACMA,EAAIiB,OAAOJ,oBAEjBb,EAAIkB,cAAc,GAE1B,CAEAV,kBAAAA,GACI9H,KAAKwB,KAAK,qBAAsB,CAACkG,SAASe,kBAAoBrB,EAAWC,aAAaK,SAASe,mBAAqB,IACxH,CAEAV,iBAAAA,GACI/H,KAAKwB,KAAK,oBACd,ECjDJ,MAAMkH,GAAiB,EAEjBC,EAAyB,EACzBC,EAAgC,EAChCC,EAAyB,EACzBC,EAA0B,EAC1BC,EAAyB,EACzBC,EAAmC,EACnCC,EAAgC,EAChCC,EAA+B,EAC/BC,EAAgC,EAEhCC,EAAgB,CAClB,CAACT,GAAyB,OAC1B,CAACC,GAAgC,cACjC,CAACC,GAAyB,OAC1B,CAACC,GAA0B,SAGzBO,EAAgB,CAClB,CAACN,GAAyB,OAC1B,CAACC,GAAmC,kBAGlCM,EAAoB,CACtBC,KAAM,UACNC,MAAO,WAGLC,EAAoB,CACtB,CAACR,GAAgC,UACjC,CAACC,GAA+B,SAChC,CAACC,GAAgC,WAGrC,MAAMO,UAAwBrJ,GAAGC,UAC7BqJ,OAEApJ,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKc,MAAM,UACf,CAEA8I,UAAAA,GACI5J,KAAK2J,QAAQE,YAAYC,SAAQC,GAASA,EAAMC,SAChDhK,KAAK2J,OAAS,IAClB,EC/CJ,MACMM,EAAkC,EAClCC,EAAkC,EAElCC,EAAsB,CACxB,CAACF,GAAkC,WACnC,CAACC,GAAkC,YAGxB,MAAME,UAA6B/J,GAAGC,UACjD,GAAiB,GACjB,GACA,GACA,GAAU,GACV,GACA,GAEAC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GAEbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKW,KAAKN,GAAGgK,KAAM,iBAAkB,MACrCrK,KAAKW,KAAKN,GAAGQ,QAAS,aAAc,IACpCb,KAAKW,KAAKN,GAAGiK,KAAM,uBAAwB,GAC3CtK,KAAKW,KAAKN,GAAGiK,KAAM,uBAAwB,GAC3CtK,KAAKW,KAAKN,GAAGiK,KAAM,kBAAmB,GACtCtK,KAAKW,KAAKN,GAAGiK,KAAM,sBA1BP,GA2BZtK,KAAKW,KAAKN,GAAGkK,QAAS,kCAAmC,GACzDvK,KAAKW,KAAKN,GAAGiK,KAAM,+BAAgC,GAEnDtK,KAAKc,MAAM,YAAaT,GAAGU,iBAAkB,kBAC7Cf,KAAKc,MAAM,gBACXd,KAAKc,MAAM,WACXd,KAAKc,MAAM,WACXd,KAAKc,MAAM,YACXd,KAAKc,MAAM,WACXd,KAAKc,MAAM,UACXd,KAAKc,MAAM,kBAAmBT,GAAGU,iBAAkB,uBACvD,CAEAC,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,kBAAmBf,OAAOqK,eAC/BxK,KAAKyK,gBACLzK,KAAK0K,mBAAmB1K,KAAKyK,eAErC,CAEAzC,OAAAA,GACQhI,MAAK,GACL2K,IAAIC,gBAAgB5K,MAAK,GAE7BU,MAAMsH,SACV,CAEA,GAASxH,GACL,MAAM8G,EAAMtH,KAAKqI,YAAYC,QAAQ9H,GAErC,IAAK8G,EACD,MAAM,IAAIjH,GAAGwK,MAAM,IAAK,qCAAsC7K,KAAM,CAACQ,IAGzE,OAAO8G,CACX,CAEA,GAAQA,EAAKwD,GAAc,QAAAC,EAAAC,UAAAC,OAANC,EAAI,IAAAC,MAAAJ,EAAA,EAAAA,EAAA,KAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAJF,EAAIE,EAAA,GAAAJ,UAAAI,GACrBpL,MAAK,EAASsH,GAAK+D,aAAaP,EAAKI,EACzC,CAEAI,eAAAA,CAAgBhE,EAAKwD,EAAKS,GACtB,MAAMnJ,EAASoI,cAAcc,gBAAgBC,GAC7CvL,MAAK,EAAQsH,EAAKwD,EAAKS,EAAUvL,KAAKwL,aAAapJ,EAAQ/B,GAAGO,OAClE,CAEA,aAAM6K,CAAQC,GACV,IACI,GAAmC,IAA/B1L,MAAK,EAAeiL,OACpB,MAAM,IAAIJ,MAAM,kCAIpB,MAAMc,EAAS3L,KAAKqI,YAEpB,IAAIsB,EACJ,GAFA3J,MAAK,EAAWA,MAAK,EAAeyD,KAAId,GAAQgJ,EAAOrD,QAAQ3F,KAElC,IAAzB3C,MAAK,EAASiL,OACdtB,QAAe3J,MAAK,EAAS,GAAGyL,cAE/B,CACD,MAAMG,QAAgB9J,QAAQ0B,IAAIxD,MAAK,EAASyD,KAAIoI,GAAKA,EAAEJ,aAC3D9B,EAAS,IAAImC,YAAYF,EAAQG,SAAQF,GAAKA,EAAEhC,cACpD,CAGA,MAAMmC,EAAS,GAWf,GAVArC,EAAOE,YAAYC,SAAQC,IACvBiC,EAAOC,KAAK,CACRC,KAAMnC,EAAMmC,KACZC,MAAOpC,EAAMoC,MACbC,SAAUrC,EAAMsC,gBAEpBtC,EAAMxI,iBAAiB,SAAS,IAAMvB,KAAK4J,cAAa,IAIxD8B,EAAW,CACX,MAAMY,EAAU5E,SAAS6E,eAAeb,GACpCY,IACAA,EAAQE,IAAM,KACdF,EAAQG,UAAY9C,EACpB2C,EAAQI,OAEhB,CAGA1M,MAAK,EAAY,IAAIwK,cAAcb,EAAQ3J,MAAK,KAChDA,MAAK,EAAUuB,iBAAiB,iBAAiBT,GAASd,MAAK,EAAiBc,KAChFd,MAAK,EAAUuB,iBAAiB,SAASe,GAAStC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,YAC1FnD,MAAK,EAAUuB,iBAAiB,SAAS,IAAMvB,KAAKwB,KAAK,UAAW,CAACxB,MAAK,EAAUgD,UACpFhD,MAAK,EAAUuB,iBAAiB,UAAU,IAAMvB,KAAKwB,KAAK,WAAY,CAACxB,MAAK,EAAUgD,UACtFhD,MAAK,EAAUuB,iBAAiB,SAAS,IAAMvB,KAAKwB,KAAK,UAAW,CAACxB,MAAK,EAAUgD,UACpFhD,MAAK,EAAUuB,iBAAiB,QAAQ,IAAMvB,MAAK,MAGnDA,KAAK8D,OAAO,CACRC,OAAQ,YACR4I,QAAS,CAAC3M,MAAK,EAAUgD,OACzBgB,YAAa,CACTuH,SAAUvL,MAAK,EAAUuL,SACzBqB,mBAAoB5M,MAAK,EAAU4M,mBACnCC,mBAAoB7M,MAAK,EAAU6M,mBACnCC,iBAAkB9M,MAAK,EAAU8M,kBAAoB,GACrDd,WAGZ,CAAE,MAAO1J,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,CAEA,KACI,MAAM4J,EAAS,CAAC,EAsBhB,MArBwB,KAApB/M,KAAKgN,aACLD,EAAOxB,SAAWvL,KAAKgN,YAEO,IAA9BhN,KAAKiN,uBACLF,EAAOF,mBAAqB7M,KAAKiN,sBAEH,IAA9BjN,KAAKkN,uBACLH,EAAOH,mBAAqB5M,KAAKkN,sBAER,IAAzBlN,KAAKmN,kBACLJ,EAAOK,cAAgBpN,KAAKmN,kBAvJpB,IAyJRnN,KAAKqN,qBACLN,EAAOD,iBAAmB3C,EAAoBnK,KAAKqN,qBAEV,IAAzCrN,KAAKsN,kCACLP,EAAOQ,8BAAgCvN,KAAKsN,iCAEN,IAAtCtN,KAAKwN,+BACLT,EAAOU,2BAA6BzN,KAAKwN,8BAEtCT,CACX,CAEAW,KAAAA,CAAMC,GACEA,IACAA,EAAYtN,GAAGuN,MAAMD,IAEzB3N,MAAK,GAAW0N,MAAMC,EAC1B,CAEA3D,IAAAA,GACIhK,MAAK,GAAWgK,MACpB,CAEA6D,KAAAA,GACI7N,MAAK,GAAW6N,OACpB,CAEAC,MAAAA,GACI9N,MAAK,GAAW8N,QACpB,CAEAC,WAAAA,GACI/N,MAAK,GAAW+N,aACpB,CAEAnE,UAAAA,GACI5J,MAAK,GAAU8J,SAAQH,GAAUA,EAAOC,eACxC5J,MAAK,EAAW,KAChBA,MAAK,EAAY,KACjBA,KAAKwB,KAAK,eACd,CAEAwM,eAAAA,CAAgBtC,GACZ,MAAMY,EAAU5E,SAAS6E,eAAeb,GACpC1L,MAAK,GAAcsM,IACnBA,EAAQG,UAAY,KACpBH,EAAQE,IAAMxM,MAAK,EAE3B,CAEA,OAAM,CAAiBc,GACnBd,MAAK,EAAQiM,KAAKnL,EAAMW,MAGxBzB,KAAK8D,OAAO,CAAEC,OAAQ,kBAAmB4I,QAAS,CAAC7L,EAAMW,MAAOwM,aAAa,IAG7E,MAAM,QAAEC,EAAO,QAAEnM,GAAYD,QAAQqM,gBACrCnO,MAAK,EAAkBkO,EAEvB,IAEI,MAAME,QAAgBxM,EAASd,EAAMW,MACrCzB,KAAK8D,OAAO,CAAEC,OAAQ,kBAAmB4I,QAAS,CAACyB,GAAUC,aAAa,GAC9E,CAAE,MAAO/L,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CAGApB,IACA/B,MAAK,EAAkB,IAC3B,CAEA,OAAM,SAIIA,MAAK,EACPA,MAAK,GACL2K,IAAIC,gBAAgB5K,MAAK,GAE7B,MAAM6B,EAAO,IAAIyM,KAAKtO,MAAK,EAAS,CAAE6D,KAAM7D,MAAK,EAAQ,GAAG6D,OAC5D7D,MAAK,EAAa2K,IAAI4D,gBAAgB1M,GACtC7B,MAAK,EAAU,GACfA,KAAKwB,KAAK,SAAU,CAACxB,MAAK,GAAWgD,OAAS,IAClD,CAEA0H,kBAAAA,CAAmB8D,GACfxO,MAAK,EAAiBK,GAAGoO,IAAIC,GAAGC,YAAYH,EAAO,CAACnO,GAAGQ,UAClDsK,MAAMyD,QAAQ5O,MAAK,KACpBA,MAAK,EAAiB,GAE9B,CAEA6O,kBAAAA,GACI,OAAOxO,GAAGoO,IAAIC,GAAGI,UAAU9O,MAAK,EAAgB,CAACK,GAAGQ,SACxD,EC3PJ,SAASkO,EAAIC,EAAKC,GACd,YAAgBzI,IAARwI,GAAqBA,IAAQE,IAAYF,EAAMC,CAC3D,CAEe,MAAME,UAA2B9O,GAAGC,UAC/CC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GAErCZ,KAAKW,KAAKN,GAAGkK,QAAS,aAAc,GACpCvK,KAAKW,KAAKN,GAAGkK,QAAS,gBAAiB,GACvCvK,KAAKW,KAAKN,GAAGQ,QAAS,kBAAmB,IACzCb,KAAKW,KAAKN,GAAGiK,KAAM,QAAS,GAC5BtK,KAAKW,KAAKN,GAAGO,MAAO,cAAc,GAClCZ,KAAKW,KAAKN,GAAGQ,QAAS,SAAU,IAEhCb,KAAKc,MAAM,kBAAmBT,GAAGU,iBACrC,CAEAC,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,eAAgB2B,WACtC7C,KAAKoB,gBACLpB,KAAKoP,SACLvM,UAAUwM,WAAW9N,iBAAiB,UAAU,KAC5CvB,KAAKoP,SACLpP,KAAKwB,KAAK,kBAAkB,IAGxC,CAEA4N,MAAAA,GACI,MAAME,EAAMzM,UAAUwM,WAEtBrP,KAAKkB,IAAI,aAAc6N,EAAIO,EAAIC,SAAU,IACzCvP,KAAKkB,IAAI,gBAAiB6N,EAAIO,EAAIE,YAAa,IAC/CxP,KAAKkB,IAAI,kBAAmB6N,EAAIO,EAAIG,cAAe,KACnDzP,KAAKkB,IAAI,QAAS6N,EAAIO,EAAII,IAAK,IAC/B1P,KAAKkB,IAAI,aAAc6N,EAAIO,EAAIK,UAAU,IACzC3P,KAAKkB,IAAI,SAAU6N,EAAIO,EAAIzL,KAAM,IACrC,ECxCJ,MAAM+L,EAAgB,GAEP,MAAMC,UAAsBxP,GAAGC,UAC1CC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKW,KAAKN,GAAGQ,QAAS,eAAgB,IACtCb,KAAKc,MAAM,qBAAsBT,GAAGU,kBACpCf,KAAKc,MAAM,UAAWT,GAAGU,kBACzBf,KAAKc,MAAM,UAAWT,GAAGU,kBACzBf,KAAKc,MAAM,UAAWT,GAAGU,kBACzBf,KAAKc,MAAM,SAAUT,GAAGU,iBAC5B,CAEAC,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,iBAAkBf,QACxCH,KAAKoB,eACLpB,KAAKkB,IAAI,eAAgB4O,aAAaC,WAE9C,CAEA,uBAAMC,GACF,MAAMD,QAAmBD,aAAaE,oBACtChQ,KAAKkB,IAAI,eAAgB6O,GACzB/P,KAAKwB,KAAK,qBACd,CAEAyO,kBAAAA,GACI,MAAMxO,EAAOzB,KAAKgF,aAClB,IACI,MAAMkL,EAAe,IAAIJ,aAAarO,EAAK0O,OAAQ,CAC/CC,IAAK3O,EAAK4O,WAAQ7J,EAClB8J,KAAM7O,EAAK8O,YAAS/J,EACpBgK,MAAO/O,EAAKgP,aAAUjK,EACtBkK,KAAMjP,EAAKkP,YAASnK,EACpBoK,IAAKnP,EAAKoP,WAAQrK,EAClBsK,KAAMrP,EAAKsP,YAASvK,EACpBwK,MAAOvP,EAAKwP,aAAUzK,EACtB/E,KAAMA,EAAKA,WAAQ+E,EACnB0K,QAASzP,EAAK0P,SACdC,SAAU3P,EAAK4P,UACfC,mBAAoB7P,EAAK8P,oBACzBC,OAAQ/P,EAAKgQ,UAEjBvB,EAAa3O,iBAAiB,SAAS,IAAMvB,KAAKwB,KAAK,UAAW,CAACC,EAAKsE,OACxEmK,EAAa3O,iBAAiB,SAAS,IAAMvB,KAAKwB,KAAK,UAAW,CAACC,EAAKsE,OACxEmK,EAAa3O,iBAAiB,SAASe,GAAStC,KAAKwB,KAAK,UAAW,CAACC,EAAKsE,GAAIzD,EAAMa,YACrF+M,EAAa3O,iBAAiB,QAAQ,IAAMvB,KAAKwB,KAAK,SAAU,CAACC,EAAKsE,OACtE6J,EAAc3D,KAAK,CAAElG,GAAItE,EAAKsE,GAAImK,gBACtC,CACA,MAAO5N,GACHtC,KAAKwB,KAAK,UAAW,CAACC,EAAKsE,GAAIzD,EAAMa,SACzC,CACJ,CAEAuO,iBAAAA,CAAkBC,GACd,MAAM5L,EAAK6L,SAASD,EAAU,IACxBE,EAASjC,EAAckC,MAAKC,GAAKA,EAAEhM,KAAOA,IAC5C8L,IACAA,EAAO3B,aAAa8B,QACpBpC,EAAcqC,OAAOrC,EAAcsC,QAAQL,GAAS,GAE5D,EC/DW,MAAMM,UAAuB9R,GAAGC,UAC3CC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKc,MAAM,qBAAsBT,GAAGU,iBACxC,CAEAC,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,qBAAqD,IAA7BwG,SAAS0K,iBACtCpS,KAAKoB,eACLsG,SAASnG,iBAAiB,oBAAoB,KAC1CvB,KAAKwB,KAAK,qBAAsB,CAACkG,SAAS0K,iBAAiB,GAGvE,ECfW,MAAMC,UAA0BhS,GAAGC,UAC9CC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKc,MAAM,YACXd,KAAKc,MAAM,UACXd,KAAKc,MAAM,UACf,CAEAE,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,qBAAwD,IAAhCf,QAAQmS,QAAQC,aAC7CvS,KAAKoB,eACLjB,OAAOmS,OAAOC,YAAYhR,iBAAiB,UAAUT,IACjDd,KAAKwB,KAAK,WAAY,CAACV,EAAM0R,OAAO3O,KAAM/C,EAAM0R,OAAOC,OAAO,GAG1E,CAEA,UAAMC,CAAKH,GACP,UACUpS,OAAOmS,OAAOC,YAAYG,KAAKH,GACrCI,qBAAoB,IAAM3S,KAAKwB,KAAK,SAAU,CAACrB,OAAOmS,OAAOC,YAAY1O,QAC7E,CAAE,MAAOvB,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,CAEAyP,MAAAA,GACI,IACIzS,OAAOmS,OAAOC,YAAYK,QAC9B,CAAE,MAAOtQ,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,EClCW,MAAM0P,UAAuBxS,GAAGC,UAC3CC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKc,MAAM,YAAaT,GAAGU,kBAC3Bf,KAAKc,MAAM,UAAWT,GAAGU,kBACzBf,KAAKc,MAAM,YAAaT,GAAGU,iBAC/B,CAEAC,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,aAAc2B,UAC5C,CAEA,aAAMiQ,GACF,IACI9S,KAAK+S,gBAAkBlQ,UAAUmQ,SAASF,QAAQ,UAClD9S,KAAK+S,UAAUxR,iBAAiB,WAAW,IAAMvB,KAAKwB,KAAK,eAC3DxB,KAAKwB,KAAK,YACd,CAAE,MAAOc,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,CAEA,aAAM8P,GACEjT,KAAK+S,kBACC/S,KAAK+S,UAAUE,UACrBjT,KAAK+S,UAAY,KAEzB,EC3BJ,MAAMG,UAAe7S,GAAGC,UACpB,GACA,GACA,GAAe,GAEfC,WAAAA,CAAYC,EAAOC,EAAS0S,GACxBzS,MAAMF,EAAOC,GACbT,MAAK,EAAqBmT,EAC1BnT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKc,MAAM,cACXd,KAAKc,MAAM,aACXd,KAAKc,MAAM,UACf,CAEA,UAAIsS,GACA,OAAOpT,MAAK,CAChB,CAEA,UAAIoT,CAAOpE,GACPA,EAAIzN,iBAAiB,YAAY,IAAMvB,KAAKwB,KAAK,gBACjDwN,EAAIzN,iBAAiB,WAAW,IAAMvB,KAAKwB,KAAK,YAAaxB,KAAKqT,WAClErE,EAAIzN,iBAAiB,SAAST,GAASd,KAAKwB,KAAK,UAAW,CAACV,EAAMwB,MAAMK,KAAM7B,EAAMwB,MAAMa,YAC3FnD,MAAK,EAAUgP,CACnB,CAEAsE,YAAAA,CAAa5N,GAET,GADA1F,KAAKgK,OACDhK,KAAKoB,cACL,IACIpB,KAAKoT,OAAS,IAAIpT,MAAK,EAAmB0F,EAC9C,CACA,MAAOpD,GACHtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CAER,CAEA,WAAIkQ,GACA,MAAO,EACX,CAEAE,mBAAAA,CAAoBxD,EAAYnN,EAAU9B,GACtCd,KAAKW,KAAKN,GAAGQ,QAAS+B,EAAU,IAChC5C,KAAKc,MAAMA,GACXd,MAAK,EAAaiM,KAAK,CAAC8D,EAAYnN,EAAU9B,GAClD,CAEA,WAAM4M,GACF,MAAM8F,EAAUxT,MAAK,EAAayD,KAAIgQ,GAAQhR,EAAgBzC,QAASyT,YACjD3R,QAAQ0B,IAAIgQ,IACtBE,OAAMtR,GAAqB,YAAXA,IACxBpC,MAAK,GAAS0N,QAGd1N,KAAKwB,KAAK,UAAW,CAAC,wBAAyB,oCAEvD,CAEAwI,IAAAA,GACIhK,MAAK,GAASgK,MAClB,CAEAhC,OAAAA,GACIhI,KAAKgK,OACLtJ,MAAMsH,SACV,EAGJ,MAAM2L,UAAwBT,EAC1B3S,WAAAA,CAAYC,EAAOC,EAAS0S,GACxBzS,MAAMF,EAAOC,EAAS0S,GACtBnT,KAAKW,KAAKN,GAAGkK,QAAS,cAAe,EACzC,CAEAqJ,eAAAA,CAAgBC,GACZ7T,KAAKsT,aAAa,CAAEQ,UAAWD,GACnC,EAGJ,MAAME,UAA6BJ,EAC/BpT,WAAAA,CAAYC,EAAOC,EAAS0S,GACxBzS,MAAMF,EAAOC,EAAS0S,GACtBnT,KAAKW,KAAKN,GAAGQ,QAAS,mBAAoB,SAC9C,CAEA+S,eAAAA,CAAgBC,GACZ7T,KAAKsT,aAAa,CAAEQ,UAAWD,EAAYG,eAAgBhU,KAAKiU,kBACpE,CAEAC,oBAAAA,CAAqBC,GACjBnU,KAAKsT,aAAa,CAAEQ,UAAW9T,KAAKoU,YAAaJ,eAAgBG,GACrE,EC7FW,MAAME,UAAkBhU,GAAGC,UACtCC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,EACzC,CAEAI,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,YAAa2B,UAC3C,CAEAqO,OAAAA,GACIrO,UAAUqO,QAAQlG,UACtB,ECbW,MAAMsJ,UAAiBjU,GAAGC,UACrCC,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GACbT,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKc,MAAM,YAAaT,GAAGU,kBAC3Bf,KAAKc,MAAM,UAAWT,GAAGU,iBAC7B,CAEAC,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,UAAW2B,UACzC,CAEA,WAAM0R,CAAMrQ,EAAMsQ,EAAOpQ,GACrB,MAAM3C,EAAO,CACTyC,KAAMA,QAAQsC,EACdgO,MAAOA,QAAShO,EAChBpC,OAEJ,IACI,MAAMqQ,QAAc3S,QAAQ0B,IAAIxD,KAAKgF,cAAc0P,QAAQjR,KAAIkR,GAAQ3U,KAAK4U,OAAOD,MAAU,IAC7F,GAAIF,EAAMxJ,OAAS,EAAG,CAClB,IAAIpI,UAAUgS,WAAW,CAAEJ,UAGvB,KAAO,CAAE9R,KAAM,iBAAkBQ,QAAS,+BAF1C1B,EAAKgT,MAAQA,CAIrB,OACM5R,UAAU0R,MAAM9S,GACtBzB,KAAKwB,KAAK,YACd,CAAE,MAAOc,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,CAEA,YAAMyR,CAAOD,GACT,MAAMtQ,QAAiBC,MAAMqQ,EAAKG,KAAM,CAAElP,YAAa,gBACjDnE,QAAa4C,EAASxC,OAC5B,OAAO,IAAIkT,KAAK,CAACtT,GAAOkT,EAAKnU,MAAO,CAChCqD,KAAM8Q,EAAKK,cAEnB,ECdJ,MAAMC,UAAmB5U,GAAGC,UACxB,GAEAC,WAAAA,CAAYC,EAAOC,EAASyU,GACxBxU,MAAMF,EAAOC,GACbT,MAAK,EAAWkV,EAChBlV,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKW,KAAKN,GAAGiK,KAAM,WAAY,EACnC,CAEAtJ,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAvCjB,SAA0B2C,GACtB,IAAIsR,EACJ,IACIA,EAAUhV,OAAO0D,GACjB,MAAMuR,EAAI,mBAGV,OAFAD,EAAQE,QAAQD,EAAGA,GACnBD,EAAQG,WAAWF,IACZ,CACX,CAAE,MAAOlV,GACL,OACIA,aAAaqV,eAED,KAAXrV,EAAEsV,MAEY,OAAXtV,EAAEsV,MAGS,uBAAXtV,EAAEyC,MAES,+BAAXzC,EAAEyC,OAENwS,GACmB,IAAnBA,EAAQlK,MAEhB,CACJ,CAckCwK,CAAiBzV,MAAK,IAC5CA,KAAKoB,gBACLpB,MAAK,EAAWG,OAAOH,MAAK,GAC5BA,MAAK,IAEb,CAEA,KACIA,KAAKkB,IAAI,WAAYlB,MAAK,EAASiL,OACvC,CAEA,GAASzK,GACL,MAAM8G,EAAMtH,KAAKqI,YAAYC,QAAQ9H,GAErC,IAAK8G,EACD,MAAM,IAAIjH,GAAGwK,MAAM,IAAK,qCAAsC7K,KAAM,CAACQ,IAGzE,OAAO8G,CACX,CAEA,GAAQA,EAAKwD,GAAc,QAAAC,EAAAC,UAAAC,OAANC,EAAI,IAAAC,MAAAJ,EAAA,EAAAA,EAAA,KAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAJF,EAAIE,EAAA,GAAAJ,UAAAI,GACrBpL,MAAK,EAASsH,GAAK+D,aAAaP,EAAKI,EACzC,CAEAwK,GAAAA,CAAIpO,EAAKwD,EAAK6K,GACV3V,MAAK,EAAQsH,EAAKwD,EAAK9K,MAAK,EAAS0V,IAAI9D,SAAS+D,IACtD,CAEAC,OAAAA,CAAQtO,EAAKwD,EAAK+K,GACd,MAAMrH,EAAQxO,MAAK,EAAS4V,QAAQC,GACtB,OAAVrH,GACAxO,MAAK,EAAQsH,EAAKwD,EAAK0D,EAE/B,CAEA6G,OAAAA,CAAQQ,EAASC,GACb9V,MAAK,EAASqV,QAAQQ,EAASC,GAC/B9V,MAAK,GACT,CAEAsV,UAAAA,CAAWO,GACP7V,MAAK,EAASsV,WAAWO,GACzB7V,MAAK,GACT,CAEA+V,KAAAA,GACI/V,MAAK,EAAS+V,QACd/V,MAAK,GACT,EC7DJgW,EAAAA,EAAOC,QAAU,CACbC,0BJoEG,cAAwCnC,EAC3CxT,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,EAASN,OAAO+V,2BAC7BlW,KAAKuT,oBAAoB,gBAAiB,4BAA6B,mCACvEvT,KAAKuT,oBAAoB,eAAgB,2BAA4B,kCACrEvT,KAAKuT,oBAAoB,YAAa,wBAAyB,8BACnE,CAEAvS,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,8BAA+Bf,QACzDH,KAAKsT,aAAa,CAAEQ,UAAW9T,KAAKoU,YAAaJ,eAAgBhU,KAAKiU,kBAC1E,CAEA,WAAIZ,GACA,OAAOrT,KAAKoT,OAAO+C,UACvB,GInFAC,oBJsFG,cAAkCrC,EACrCxT,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,EAASN,OAAOkW,eAC7BrW,KAAKuT,oBAAoB,gBAAiB,4BAA6B,kCAC3E,CAEAvS,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,kBAAmBf,QAC7CH,KAAKsT,aAAa,CAAEQ,UAAW9T,KAAKoU,YAAaJ,eAAgBhU,KAAKiU,kBAC1E,CAEA,WAAIZ,GACA,MAAO,CAACrT,KAAKoT,OAAOgC,EAAGpV,KAAKoT,OAAOkD,EAAGtW,KAAKoT,OAAOmD,EACtD,GInGAC,mBJsGG,cAAiC7C,EACpCpT,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,EAASN,OAAOqW,oBAC7BxW,KAAKuT,oBAAoB,uBAAwB,iCAAkC,uCACvF,CAEAvS,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,uBAAwBf,QAClDH,KAAKsT,aAAa,CAAEQ,UAAW9T,KAAKoU,aACxC,CAEA,WAAIf,GACA,MAAO,CAACrT,KAAKoT,OAAOqD,YACxB,GInHAtV,iBAAgB,EAChBiC,UAAS,EACTqB,cAAa,EACba,qBAAoB,EACpBoR,mBX+IG,cAAiChN,EACpCnJ,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GAEbT,KAAKW,KAAKN,GAAGO,MAAO,WAAW,GAC/BZ,KAAKW,KAAKN,GAAGO,MAAO,yBAAyB,GAC7CZ,KAAKW,KAAKN,GAAGO,MAAO,sBAAsB,GAC1CZ,KAAKW,KAAKN,GAAGO,MAAO,wBAAwB,GAC5CZ,KAAKW,KAAKN,GAAGO,MAAO,sBAAsB,GAC1CZ,KAAKW,KAAKN,GAAGO,MAAO,iBAAiB,GACrCZ,KAAKW,KAAKN,GAAGiK,KAAM,mBAAoB5B,EAC3C,CAEA1H,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,iBAAkB2B,WAAaA,UAAU8T,aAAaC,gBACpF,CAEA,aAAMnL,GAEF,OADAzL,KAAK4J,aACE5J,KAAK2J,aAAe9G,UAAU8T,aAAaC,gBAAgB5W,MAAK,IAC3E,CAEA,KACI,MAAM6W,EAAc,CAChBC,MAAO9W,KAAK+W,QACZC,oBAAqB1N,EAAkBtJ,KAAKiX,uBAC5CC,iBAAkBlX,KAAKmX,mBACvBC,mBAAoB9N,EAAkBtJ,KAAKqX,sBAC3CC,iBAAkBhO,EAAkBtJ,KAAKuX,oBACzCC,YAAalO,EAAkBtJ,KAAKyX,gBAOxC,OALIzX,KAAK0X,mBAAqBhP,IAC1BmO,EAAYc,MAAQ,CAChBC,eAAgBnO,EAAkBzJ,KAAK0X,oBAGxCb,CACX,GWpLA9P,WAAU,EACVK,WAAU,EACVyQ,cJ+GG,cAA4B9D,EAC/BxT,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,EAASN,OAAO0X,eAC7B7X,KAAKuT,oBAAoB,gBAAiB,4BAA6B,kCAC3E,CAEAvS,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,kBAAmBf,QAC7CH,KAAKsT,aAAa,CAAEQ,UAAW9T,KAAKoU,YAAaJ,eAAgBhU,KAAKiU,kBAC1E,CAEA,WAAIZ,GACA,MAAO,CAACrT,KAAKoT,OAAOgC,EAAGpV,KAAKoT,OAAOkD,EAAGtW,KAAKoT,OAAOmD,EACtD,GI5HAuB,gBJ+HG,cAA8B/D,EACjCxT,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,EAASN,OAAO4X,WAC7B/X,KAAKuT,oBAAoB,YAAa,wBAAyB,8BACnE,CAEAvS,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,cAAef,QACzCH,KAAKsT,aAAa,CAAEQ,UAAW9T,KAAKoU,YAAaJ,eAAgBhU,KAAKiU,kBAC1E,CAEA,WAAIZ,GACA,MAAO,CAACrT,KAAKoT,OAAOgC,EAAGpV,KAAKoT,OAAOkD,EAAGtW,KAAKoT,OAAOmD,EACtD,GI5IAyB,yBJ+IG,cAAuCjE,EAC1CxT,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,EAASN,OAAO6X,0BAC7BhY,KAAKuT,oBAAoB,gBAAiB,4BAA6B,kCAC3E,CAEAvS,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,6BAA8Bf,QACxDH,KAAKsT,aAAa,CAAEQ,UAAW9T,KAAKoU,YAAaJ,eAAgBhU,KAAKiU,kBAC1E,CAEA,WAAIZ,GACA,MAAO,CAACrT,KAAKoT,OAAOgC,EAAGpV,KAAKoT,OAAOkD,EAAGtW,KAAKoT,OAAOmD,EACtD,GI5JA0B,aDkDG,cAA2BhD,EAC9B1U,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,EAAS,gBACtBT,KAAKc,MAAM,YACf,CAEAE,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACTjB,KAAKoB,eACLjB,OAAOoB,iBAAiB,WAAWT,IAC/BsF,QAAQC,IAAIvF,GACZd,KAAKwB,KAAK,YAAa,CAACV,EAAM4U,KAAO,GAAI5U,EAAMoX,UAAY,GAAIpX,EAAMqX,UAAY,GAAIrX,EAAMsD,KAAK,GAG5G,GC/DAgU,mBJ8JG,cAAiCrE,EACpCxT,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,EAASN,OAAOkY,cAC7BrY,KAAKuT,oBAAoB,eAAgB,2BAA4B,iCACzE,CAEAvS,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,iBAAkBf,QAC5CH,KAAKsT,aAAa,CAAEQ,UAAW9T,KAAKoU,YAAaJ,eAAgBhU,KAAKiU,kBAC1E,CAEA,WAAIZ,GACA,MAAO,CAACrT,KAAKoT,OAAOgC,EAAGpV,KAAKoT,OAAOkD,EAAGtW,KAAKoT,OAAOmD,EACtD,GI3KAnM,qBAAoB,EACpB+E,mBAAkB,EAClBU,cAAa,EACbsC,eAAc,EACdmG,0BJ0KG,cAAwCvE,EAC3CxT,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,EAASN,OAAOmY,2BAC7BtY,KAAKuT,oBAAoB,gBAAiB,4BAA6B,mCACvEvT,KAAKuT,oBAAoB,YAAa,wBAAyB,8BACnE,CAEAvS,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,8BAA+Bf,QACzDH,KAAKsT,aAAa,CAAEQ,UAAW9T,KAAKoU,YAAaJ,eAAgBhU,KAAKiU,kBAC1E,CAEA,WAAIZ,GACA,OAAOrT,KAAKoT,OAAO+C,UACvB,GIxLA9D,kBAAiB,EACjBQ,eAAc,EACd0F,eD0DG,cAA6BtD,EAChC1U,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,EAAS,iBAC1B,GC5DA+X,gBXCG,cAA8B9O,EACjCnJ,WAAAA,CAAYC,EAAOC,GACfC,MAAMF,EAAOC,GAEbT,KAAKW,KAAKN,GAAGQ,QAAS,yBAA0B,IAChDb,KAAKW,KAAKN,GAAGQ,QAAS,qBAAsB,IAG5Cb,KAAKW,KAAKN,GAAGO,MAAO,WAAW,GAC/BZ,KAAKW,KAAKN,GAAGQ,QAAS,kBAAmB,IACzCb,KAAKW,KAAKN,GAAGiK,KAAM,oBAAqB5B,GACxC1I,KAAKW,KAAKN,GAAGiK,KAAM,iBAAkB5B,GACrC1I,KAAKW,KAAKN,GAAGiK,KAAM,qBAAsB5B,GACzC1I,KAAKW,KAAKN,GAAGkK,QAAS,YAAa7B,GACnC1I,KAAKW,KAAKN,GAAGiK,KAAM,qBAAsB5B,GACzC1I,KAAKW,KAAKN,GAAGiK,KAAM,eAAgB5B,GACnC1I,KAAKW,KAAKN,GAAGiK,KAAM,eAAgB5B,GAGnC1I,KAAKW,KAAKN,GAAGO,MAAO,WAAW,GAC/BZ,KAAKW,KAAKN,GAAGQ,QAAS,kBAAmB,IACzCb,KAAKW,KAAKN,GAAGkK,QAAS,gBAAiB7B,GACvC1I,KAAKW,KAAKN,GAAGiK,KAAM,eAAgB5B,GACnC1I,KAAKW,KAAKN,GAAGkK,QAAS,cAAe7B,GACrC1I,KAAKW,KAAKN,GAAGiK,KAAM,WAAY5B,GAC/B1I,KAAKW,KAAKN,GAAGiK,KAAM,UAAW5B,GAC9B1I,KAAKW,KAAKN,GAAGiK,KAAM,eAAgB5B,GAEnC1I,KAAKc,MAAM,gCACXd,KAAKc,MAAM,4BACXd,KAAKc,MAAM,qBAAsBT,GAAGU,iBAAkB,0BAC1D,CAEAC,MAAAA,CAAOC,GACHP,MAAMM,OAAOC,GACbjB,KAAKkB,IAAI,gBAAiB,iBAAkB2B,WAAaA,UAAU8T,aAAa8B,cAAgB5V,UAAU8T,aAAa+B,kBACnH1Y,KAAKoB,eAAiB,gBAAiByB,YACvCJ,EAAgBzC,KAAM,aAAc,yBAA0B,gCAC9DyC,EAAgBzC,KAAM,SAAU,qBAAsB,4BAE9D,CAEA,uBAAMgQ,GACF,WACyBnN,UAAU8T,aAAa8B,aAAa,CAAE3B,MAAO9W,KAAK+W,QAASY,MAAO3X,KAAK2Y,WACrF9O,YAAYC,SAAQC,GAASA,EAAMC,QAC9C,CAAE,MAAO1H,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,CAEA,sBAAMuV,GACF,IACI,MACME,SADgB/V,UAAU8T,aAAa+B,oBACpBG,QAAOC,GAAgB,eAAXA,EAAE5M,MAAoC,eAAX4M,EAAE5M,OAClElM,KAAK8D,OAAO,CACRC,OAAQ,qBACRC,YAAa4U,GAErB,CAAE,MAAOtW,GACLtC,KAAKwB,KAAK,UAAW,CAACc,EAAMK,KAAML,EAAMa,SAC5C,CACJ,CAEA,aAAMsI,GAEF,OADAzL,KAAK4J,aACE5J,KAAK2J,aAAe9G,UAAU8T,aAAa8B,aAAazY,MAAK,IACxE,CAEA,KACI,MAAM6W,EAAc,CAAC,EAoDrB,OAnDI7W,KAAK+W,UACLF,EAAYC,MAAQ,CAAC,EACjB9W,KAAK+Y,kBACLlC,EAAYC,MAAMkC,SAAWhZ,KAAK+Y,iBAElC/Y,KAAKiZ,oBAAsBvQ,IAC3BmO,EAAYC,MAAMoC,gBA9HjB,IA8HmClZ,KAAKiZ,mBAEzCjZ,KAAKmZ,iBAAmBzQ,IACxBmO,EAAYC,MAAMsC,aAAepZ,KAAKmZ,gBAEtCnZ,KAAKqZ,qBAAuB3Q,IAC5BmO,EAAYC,MAAMwC,iBApIjB,IAoIoCtZ,KAAKqZ,oBAE1CrZ,KAAKuZ,YAAc7Q,IACnBmO,EAAYC,MAAM0C,QAAUxZ,KAAKuZ,WAEjCvZ,KAAKyZ,qBAAuB/Q,IAC5BmO,EAAYC,MAAM4C,iBA1IjB,IA0IoC1Z,KAAKyZ,oBAE1CzZ,KAAK2Z,eAAiBjR,IACtBmO,EAAYC,MAAM8C,WAAa5Z,KAAK2Z,cAEpC3Z,KAAK6Z,eAAiBnR,IACtBmO,EAAYC,MAAMgD,WAAa9Z,KAAK6Z,eAGxC7Z,KAAK2Y,UACL9B,EAAYc,MAAQ,CAAC,EACjB3X,KAAK+Z,kBACLlD,EAAYc,MAAMqB,SAAWhZ,KAAK+Z,iBAElC/Z,KAAKga,gBAAkBtR,IACvBmO,EAAYc,MAAMsC,YAAcja,KAAKga,eAErCha,KAAKka,eAAiBxR,IACtBmO,EAAYc,MAAMwC,WAAa/Q,EAAcpJ,KAAKka,eAElDla,KAAKoa,cAAgB1R,IACrBmO,EAAYc,MAAM0C,UAAYra,KAAKoa,aAEnCpa,KAAKsa,WAAa5R,IAClBmO,EAAYc,MAAM4C,OAASva,KAAKsa,UAEhCta,KAAKwa,UAAY9R,IACjBmO,EAAYc,MAAM8C,MAAQza,KAAKwa,SAE/Bxa,KAAK0a,eAAiBhS,IACtBmO,EAAYc,MAAMgD,WAAatR,EAAcrJ,KAAK0a,gBAGnD7D,CACX,GW3HAxC,UAAS,EACTC,SAAQA,E","sources":["webpack://dataflex-webapis/webpack/bootstrap","webpack://dataflex-webapis/webpack/runtime/global","webpack://dataflex-webapis/./src/broadcast-channel.js","webpack://dataflex-webapis/./src/utils/blob.js","webpack://dataflex-webapis/./src/utils/permissions.js","webpack://dataflex-webapis/./src/clipboard.js","webpack://dataflex-webapis/./src/contact-picker.js","webpack://dataflex-webapis/./src/credential-management.js","webpack://dataflex-webapis/./src/eye-dropper.js","webpack://dataflex-webapis/./src/fullscreen.js","webpack://dataflex-webapis/./src/mediastream.js","webpack://dataflex-webapis/./src/mediastream-recording.js","webpack://dataflex-webapis/./src/network-information.js","webpack://dataflex-webapis/./src/notifications.js","webpack://dataflex-webapis/./src/page-visibility.js","webpack://dataflex-webapis/./src/screen-orientation.js","webpack://dataflex-webapis/./src/screen-wake-lock.js","webpack://dataflex-webapis/./src/sensor.js","webpack://dataflex-webapis/./src/vibration.js","webpack://dataflex-webapis/./src/web-share.js","webpack://dataflex-webapis/./src/web-storage.js","webpack://dataflex-webapis/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","export default class BroadcastChannelComponent extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.prop(df.tString, 'psName', '');\r\n        this.event('OnMessage', df.cCallModeDefault);\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', !!window.BroadcastChannel);\r\n        if (this.pbIsSupported && this.psName !== '') {\r\n            this._channel = new BroadcastChannel(this.psName);\r\n            this._channel.addEventListener('message', event => {\r\n                this.fire('OnMessage', [event.data]);\r\n            });\r\n        }\r\n    }\r\n\r\n    postMessage(sData) {\r\n        this._channel.postMessage(sData);\r\n    }\r\n}","export function readBlob(blob) {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.onload = () => resolve(reader.result);\r\n        reader.onerror = () => reject(reader.error);\r\n        reader.readAsDataURL(blob);\r\n    });\r\n}\r\n","export async function queryPermission(instance, name, property, event) {\r\n    try {\r\n        const result = await navigator.permissions.query({ name });\r\n        instance.set(property, result.state || result.status);\r\n        if (event) {\r\n            result.onchange = () => {\r\n                instance.set(property, result.state || result.status);\r\n                instance.fire(event);\r\n            };\r\n        }\r\n        return result.state || result.status;\r\n    } catch (error) {\r\n        instance.fire('OnError', [error.name, error.message]);\r\n    }\r\n}\r\n","import { readBlob } from \"./utils/blob\";\r\nimport { queryPermission } from \"./utils/permissions\";\r\n\r\nexport default class Clipboard extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.prop(df.tString, 'psReadPermission', '');\r\n        this.prop(df.tString, 'psWritePermission', '');\r\n        this.event('OnReadPermissionChange');\r\n        this.event('OnWritePermissionChange');\r\n        this.event('OnRead', df.cCallModeDefault, 'OnReadProxy');\r\n        this.event('OnReadText');\r\n        this.event('OnWrite');\r\n        this.event('OnWriteText');\r\n        this.event('OnError');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'clipboard' in navigator);\r\n        if (this.pbIsSupported && 'permissions' in navigator) {\r\n            queryPermission(this, 'clipboard-read', 'psReadPermission', 'OnReadPermissionChange');\r\n            queryPermission(this, 'clipboard-write', 'psWritePermission', 'OnWritePermissionChange');\r\n        }\r\n    }\r\n\r\n    async read() {\r\n        const items = await navigator.clipboard.read();\r\n        const data = await Promise.all(\r\n            items.map(item => Promise.all(\r\n                item.types.map(async (type) => {\r\n                    const blob = await item.getType(type);\r\n                    return readBlob(blob);\r\n                })\r\n            ))\r\n        );\r\n        this.fireEx({\r\n            sEvent: 'OnRead',\r\n            tActionData: data\r\n        });\r\n    }\r\n\r\n    async readText() {\r\n        try {\r\n            const text = await navigator.clipboard.readText();\r\n            this.fire('OnReadText', [text])\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n\r\n    async write(url) {\r\n        try {\r\n            const response = await fetch(url);\r\n            const blob = await response.blob();\r\n            const data = [new ClipboardItem({ [blob.type]: blob })];\r\n            await navigator.clipboard.write(data);\r\n            this.fire('OnWrite');\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n\r\n    async writeText(text) {\r\n        try {\r\n            await navigator.clipboard.writeText(text);\r\n            this.fire('OnWriteText');\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n}\r\n","export default class ContactPicker extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.prop(df.tString, 'psSupportedProperties', '');\r\n        this.event('OnSelect', df.cCallModeDefault);\r\n    }\r\n\r\n    async create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'contacts' in navigator);\r\n        if (this.pbIsSupported) {\r\n            const properties = await navigator.contacts.getProperties();\r\n            this.set('psSupportedProperties', properties.join(','));\r\n        }\r\n    }\r\n\r\n    async select() {\r\n        const params = this._tActionData;\r\n        const result = await navigator.contacts.select(\r\n            params.aProperties,\r\n            { multiple: params.bMultiple }\r\n        );\r\n        this.fire('OnSelect', [JSON.stringify(result)]);\r\n    }\r\n}\r\n","export default class CredentialManagement extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.event('OnCredential', df.cCallModeDefault, 'OnCredentialProxy');\r\n        this.event('OnSuccess');\r\n        this.event('OnError');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', window.PasswordCredential || window.FederatedCredential);\r\n    }\r\n\r\n    async getCredential() {\r\n        const options = this._tActionData;\r\n        const c = await navigator.credentials.get(options);\r\n        // Have to manually clone object, because none of these properties are enumerable\r\n        const credential = {\r\n            id: c.id,\r\n            type: c.type,\r\n            iconURL: c.iconURL,\r\n            name: c.name,\r\n            password: c.password,\r\n            provider: c.provider,\r\n            protocol: c.protocol\r\n        };\r\n        this.fireEx({ sEvent: 'OnCredential', tActionData: credential });\r\n    }\r\n\r\n    async #store(options) {\r\n        try {\r\n            const credential = await navigator.credentials.create(options);\r\n            console.log({ credential });\r\n            if (credential) {\r\n                await navigator.credentials.store(credential);\r\n                this.fire('OnSuccess');\r\n            } else {\r\n                this.fire('OnError', ['CredentialCreationError', 'Unable to create credential based on these options']);\r\n            }\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n\r\n    storePassword(id, name, iconURL, password) {\r\n        const options = {\r\n            password: {\r\n                id,\r\n                name: name || undefined,\r\n                iconURL: iconURL || undefined,\r\n                password\r\n            }\r\n        };\r\n        this.#store(options);\r\n    }\r\n\r\n    storeFederated(id, name, iconURL, provider, protocol) {\r\n        const options = {\r\n            federated: {\r\n                id,\r\n                name: name || undefined,\r\n                iconURL: iconURL || undefined,\r\n                provider,\r\n                protocol: protocol || undefined\r\n            }\r\n        };\r\n        this.#store(options);\r\n    }\r\n\r\n    async preventSilentAccess() {\r\n        try {\r\n            await navigator.credentials.preventSilentAccess();\r\n            this.fire('OnSuccess');\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n}","export default class EyeDropperComponent extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.event('OnSelect', df.cCallModeDefault);\r\n        this._abortController = new AbortController();\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', !!window.EyeDropper);\r\n    }\r\n\r\n    async open() {\r\n        const result = await new EyeDropper().open({ signal: this._abortController.signal });\r\n        this.fire('OnSelect', [result.sRGBHex]);\r\n    }\r\n\r\n    abort() {\r\n        this._abortController.abort();\r\n    }\r\n}\r\n","export default class Fullscreen extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.event('OnFullscreenChange', df.cCallModeDefault);\r\n        this.event('OnFullscreenError', df.cCallModeDefault);\r\n    }\r\n\r\n    static getDfObjName(obj) {\r\n        if (obj.dataset.dfobj) {\r\n            return obj.dataset.dfobj;\r\n        }\r\n        if (obj.parentElement) {\r\n            return Fullscreen.getDfObjName(obj.parentElement);\r\n        }\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', document.fullscreenEnabled);\r\n        if (this.pbIsSupported) {\r\n            df.dom.on('fullscreenchange', document, this.onFullscreenChange, this);\r\n            df.dom.on('fullscreenerror', document, this.onFullscreenError, this);\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        df.dom.off('fullscreenchange', document, this.onFullscreenChange, this);\r\n        df.dom.off('fullscreenerror', document, this.onFullscreenError, this);\r\n        super.destroy();\r\n    }\r\n\r\n    exitFullscreen() {\r\n        document.exitFullscreen();\r\n    }\r\n\r\n    async requestFullscreen(sObjName) {\r\n        const obj = this.getWebApp().findObj(sObjName);\r\n        if (obj) {\r\n            await obj._eElem.requestFullscreen();\r\n            // Need to call 'sizeHeight' in case obj is a control, but it doesn't exist if obj is a container, hence optional chaining\r\n            obj.sizeHeight?.(-1);\r\n        }\r\n    }\r\n\r\n    onFullscreenChange() {\r\n        this.fire('OnFullscreenChange', [document.fullscreenElement ? Fullscreen.getDfObjName(document.fullscreenElement) : ''])\r\n    }\r\n\r\n    onFullscreenError() {\r\n        this.fire('OnFullscreenError');\r\n    }\r\n}\r\n","import { queryPermission } from \"./utils/permissions\";\r\n\r\nconst MSAPI_DEFAULT = -1;\r\nconst MSAPI_ON = 1;\r\nconst MSAPI_FACING_MODE_USER = 0;\r\nconst MSAPI_FACING_MODE_ENVIRONMENT = 1;\r\nconst MSAPI_FACING_MODE_LEFT = 2;\r\nconst MSAPI_FACING_MODE_RIGHT = 3;\r\nconst MSAPI_RESIZE_MODE_NONE = 0;\r\nconst MSAPI_RESIZE_MODE_CROP_AND_SCALE = 1;\r\nconst MSAPI_DISPLAY_SURFACE_BROWSER = 0;\r\nconst MSAPI_DISPLAY_SURFACE_WINDOW = 1;\r\nconst MSAPI_DISPLAY_SURFACE_MONITOR = 2;\r\n\r\nconst facingModeMap = {\r\n    [MSAPI_FACING_MODE_USER]: 'user',\r\n    [MSAPI_FACING_MODE_ENVIRONMENT]: 'environment',\r\n    [MSAPI_FACING_MODE_LEFT]: 'left',\r\n    [MSAPI_FACING_MODE_RIGHT]: 'right'\r\n};\r\n\r\nconst resizeModeMap = {\r\n    [MSAPI_RESIZE_MODE_NONE]: 'none',\r\n    [MSAPI_RESIZE_MODE_CROP_AND_SCALE]: 'crop-and-scale'\r\n};\r\n\r\nconst includeExcludeMap = {\r\n    true: 'include',\r\n    false: 'exclude'\r\n};\r\n\r\nconst displaySurfaceMap = {\r\n    [MSAPI_DISPLAY_SURFACE_BROWSER]: 'browser',\r\n    [MSAPI_DISPLAY_SURFACE_WINDOW]: 'window',\r\n    [MSAPI_DISPLAY_SURFACE_MONITOR]: 'monitor'\r\n};\r\n\r\nclass BaseMediaStream extends df.WebObject {\r\n    stream;\r\n\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.event('OnError');\r\n    }\r\n\r\n    disconnect() {\r\n        this.stream?.getTracks().forEach(track => track.stop());\r\n        this.stream = null;\r\n    }\r\n}\r\n\r\nexport class UserMediaStream extends BaseMediaStream {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n\r\n        this.prop(df.tString, 'psMicrophonePermission', '');\r\n        this.prop(df.tString, 'psCameraPermission', '');\r\n\r\n        // Audio track properties\r\n        this.prop(df.tBool, 'pbAudio', false);\r\n        this.prop(df.tString, 'psAudioDeviceId', '');\r\n        this.prop(df.tInt, 'peAutoGainControl', MSAPI_DEFAULT);\r\n        this.prop(df.tInt, 'piChannelCount', MSAPI_DEFAULT);\r\n        this.prop(df.tInt, 'peEchoCancellation', MSAPI_DEFAULT);\r\n        this.prop(df.tNumber, 'pnLatency', MSAPI_DEFAULT);\r\n        this.prop(df.tInt, 'peNoiseSuppression', MSAPI_DEFAULT);\r\n        this.prop(df.tInt, 'piSampleRate', MSAPI_DEFAULT);\r\n        this.prop(df.tInt, 'piSampleSize', MSAPI_DEFAULT);\r\n\r\n        // Video track properties\r\n        this.prop(df.tBool, 'pbVideo', false);\r\n        this.prop(df.tString, 'psVideoDeviceId', '');\r\n        this.prop(df.tNumber, 'pnAspectRatio', MSAPI_DEFAULT);\r\n        this.prop(df.tInt, 'peFacingMode', MSAPI_DEFAULT);\r\n        this.prop(df.tNumber, 'pnFrameRate', MSAPI_DEFAULT);\r\n        this.prop(df.tInt, 'piHeight', MSAPI_DEFAULT);\r\n        this.prop(df.tInt, 'piWidth', MSAPI_DEFAULT);\r\n        this.prop(df.tInt, 'peResizeMode', MSAPI_DEFAULT);\r\n\r\n        this.event('OnMicrophonePermissionChange');\r\n        this.event('OnCameraPermissionChange');\r\n        this.event('OnEnumerateDevices', df.cCallModeDefault, 'OnEnumerateDevicesProxy');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'mediaDevices' in navigator && navigator.mediaDevices.getUserMedia && navigator.mediaDevices.enumerateDevices);\r\n        if (this.pbIsSupported && 'permissions' in navigator) {\r\n            queryPermission(this, 'microphone', 'psMicrophonePermission', 'OnMicrophonePermissionChange');\r\n            queryPermission(this, 'camera', 'psCameraPermission', 'OnCameraPermissionChange');\r\n        }\r\n    }\r\n\r\n    async requestPermission() {\r\n        try {\r\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: this.pbAudio, video: this.pbVideo });\r\n            stream.getTracks().forEach(track => track.stop());\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n\r\n    async enumerateDevices() {\r\n        try {\r\n            const devices = await navigator.mediaDevices.enumerateDevices();\r\n            const filtered = devices.filter(d => d.kind === 'audioinput' || d.kind === 'videoinput');\r\n            this.fireEx({\r\n                sEvent: 'OnEnumerateDevices',\r\n                tActionData: filtered\r\n            });\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n\r\n    async connect() {\r\n        this.disconnect();\r\n        return this.stream = await navigator.mediaDevices.getUserMedia(this.#getConstraints());\r\n    }\r\n\r\n    #getConstraints() {\r\n        const constraints = {};\r\n        if (this.pbAudio) {\r\n            constraints.audio = {};\r\n            if (this.psAudioDeviceId) {\r\n                constraints.audio.deviceId = this.psAudioDeviceId;\r\n            }\r\n            if (this.peAutoGainControl !== MSAPI_DEFAULT) {\r\n                constraints.audio.autoGainControl = this.peAutoGainControl === MSAPI_ON;\r\n            }\r\n            if (this.piChannelCount !== MSAPI_DEFAULT) {\r\n                constraints.audio.channelCount = this.piChannelCount;\r\n            }\r\n            if (this.peEchoCancellation !== MSAPI_DEFAULT) {\r\n                constraints.audio.echoCancellation = this.peEchoCancellation === MSAPI_ON;\r\n            }\r\n            if (this.pnLatency !== MSAPI_DEFAULT) {\r\n                constraints.audio.latency = this.pnLatency;\r\n            }\r\n            if (this.peNoiseSuppression !== MSAPI_DEFAULT) {\r\n                constraints.audio.noiseSuppression = this.peNoiseSuppression === MSAPI_ON;\r\n            }\r\n            if (this.piSampleRate !== MSAPI_DEFAULT) {\r\n                constraints.audio.sampleRate = this.piSampleRate;\r\n            }\r\n            if (this.piSampleSize !== MSAPI_DEFAULT) {\r\n                constraints.audio.sampleSize = this.piSampleSize;\r\n            }\r\n        }\r\n        if (this.pbVideo) {\r\n            constraints.video = {};\r\n            if (this.psVideoDeviceId) {\r\n                constraints.video.deviceId = this.psVideoDeviceId;\r\n            }\r\n            if (this.pnAspectRatio !== MSAPI_DEFAULT) {\r\n                constraints.video.aspectRatio = this.pnAspectRatio;\r\n            }\r\n            if (this.peFacingMode !== MSAPI_DEFAULT) {\r\n                constraints.video.facingMode = facingModeMap[this.peFacingMode];\r\n            }\r\n            if (this.pnFrameRate !== MSAPI_DEFAULT) {\r\n                constraints.video.frameRate = this.pnFrameRate;\r\n            }\r\n            if (this.piHeight !== MSAPI_DEFAULT) {\r\n                constraints.video.height = this.piHeight;\r\n            }\r\n            if (this.piWidth !== MSAPI_DEFAULT) {\r\n                constraints.video.width = this.piWidth;\r\n            }\r\n            if (this.peResizeMode !== MSAPI_DEFAULT) {\r\n                constraints.video.resizeMode = resizeModeMap[this.peResizeMode];\r\n            }\r\n        }\r\n        return constraints;\r\n    }\r\n}\r\n\r\nexport class DisplayMediaStream extends BaseMediaStream {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n\r\n        this.prop(df.tBool, 'pbAudio', false);\r\n        this.prop(df.tBool, 'pbMonitorTypeSurfaces', true);\r\n        this.prop(df.tBool, 'pbPreferCurrentTab', false);\r\n        this.prop(df.tBool, 'pbSelfBrowserSurface', false);\r\n        this.prop(df.tBool, 'pbSurfaceSwitching', false);\r\n        this.prop(df.tBool, 'pbSystemAudio', true);\r\n        this.prop(df.tInt, 'peDisplaySurface', MSAPI_DEFAULT);\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'mediaDevices' in navigator && navigator.mediaDevices.getDisplayMedia);\r\n    }\r\n\r\n    async connect() {\r\n        this.disconnect();\r\n        return this.stream = await navigator.mediaDevices.getDisplayMedia(this.#getConstraints());\r\n    }\r\n\r\n    #getConstraints() {\r\n        const constraints = {\r\n            audio: this.pbAudio,\r\n            monitorTypeSurfaces: includeExcludeMap[this.pbMonitorTypeSurfaces],\r\n            preferCurrentTab: this.pbPreferCurrentTab,\r\n            selfBrowserSurface: includeExcludeMap[this.pbSelfBrowserSurface],\r\n            surfaceSwitching: includeExcludeMap[this.pbSurfaceSwitching],\r\n            systemAudio: includeExcludeMap[this.pbSystemAudio]\r\n        };\r\n        if (this.peDisplaySurface !== MSAPI_DEFAULT) {\r\n            constraints.video = {\r\n                displaySurface: displaySurfaceMap[this.peDisplaySurface]\r\n            };\r\n        }\r\n        return constraints;\r\n    }\r\n}","import { readBlob } from \"./utils/blob\";\r\n\r\nconst MSR_DEFAULT = -1;\r\nconst MSR_AUDIO_BITRATE_MODE_CONSTANT = 0;\r\nconst MSR_AUDIO_BITRATE_MODE_VARIABLE = 1;\r\n\r\nconst audioBitrateModeMap = {\r\n    [MSR_AUDIO_BITRATE_MODE_CONSTANT]: 'constant',\r\n    [MSR_AUDIO_BITRATE_MODE_VARIABLE]: 'variable'\r\n};\r\n\r\nexport default class MediaStreamRecording extends df.WebObject {\r\n    #aMediaStreams = [];\r\n    #streams;\r\n    #recorder;\r\n    #chunks = [];\r\n    #objectUrl;\r\n    #processingData;\r\n\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.prop(df.tAdv, 'paMediaStreams', null);\r\n        this.prop(df.tString, 'psMimeType', '');\r\n        this.prop(df.tInt, 'piAudioBitsPerSecond', 0);\r\n        this.prop(df.tInt, 'piVideoBitsPerSecond', 0);\r\n        this.prop(df.tInt, 'piBitsPerSecond', 0);\r\n        this.prop(df.tInt, 'peAudioBitrateMode', MSR_DEFAULT);\r\n        this.prop(df.tNumber, 'pnVideoKeyFrameIntervalDuration', 0);\r\n        this.prop(df.tInt, 'piVideoKeyFrameIntervalCount', 0);\r\n\r\n        this.event('OnConnect', df.cCallModeDefault, 'OnConnectProxy');\r\n        this.event('OnDisconnect');\r\n        this.event('OnError');\r\n        this.event('OnPause');\r\n        this.event('OnResume');\r\n        this.event('OnStart');\r\n        this.event('OnStop');\r\n        this.event('OnDataAvailable', df.cCallModeDefault, 'OnDataAvailableProxy');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', !!window.MediaRecorder);\r\n        if (this.paMediaStreams) {\r\n            this.set_paMediaStreams(this.paMediaStreams);\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        if (this.#objectUrl) {\r\n            URL.revokeObjectURL(this.#objectUrl);\r\n        }\r\n        super.destroy();\r\n    }\r\n\r\n    #findObj(sName) {\r\n        const obj = this.getWebApp().findObj(sName);\r\n\r\n        if (!obj) {\r\n            throw new df.Error(999, \"Return WebObject not found '{{0}}'\", this, [sName]);\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    #return(obj, msg, ...args) {\r\n        this.#findObj(obj).serverAction(msg, args);\r\n    }\r\n\r\n    isTypeSupported(obj, msg, mimeType) {\r\n        const result = MediaRecorder.isTypeSupported(mimeType);\r\n        this.#return(obj, msg, mimeType, this.toServerType(result, df.tBool));\r\n    }\r\n\r\n    async connect(elementId) {\r\n        try {\r\n            if (this.#aMediaStreams.length === 0) {\r\n                throw new Error('No media streams to connect to');\r\n            }\r\n\r\n            // Get the stream\r\n            const webApp = this.getWebApp();\r\n            this.#streams = this.#aMediaStreams.map(name => webApp.findObj(name));\r\n            let stream;\r\n            if (this.#streams.length === 1) {\r\n                stream = await this.#streams[0].connect();\r\n            }\r\n            else {\r\n                const streams = await Promise.all(this.#streams.map(s => s.connect()));\r\n                stream = new MediaStream(streams.flatMap(s => s.getTracks()));\r\n            }\r\n\r\n            // Get track info and add disconnect hook\r\n            const tracks = [];\r\n            stream.getTracks().forEach(track => {\r\n                tracks.push({\r\n                    kind: track.kind,\r\n                    label: track.label,\r\n                    settings: track.getSettings()\r\n                });\r\n                track.addEventListener('ended', () => this.disconnect());\r\n            });\r\n\r\n            // Connect stream to media element, if an id was passed\r\n            if (elementId) {\r\n                const element = document.getElementById(elementId);\r\n                if (element) {\r\n                    element.src = null;\r\n                    element.srcObject = stream;\r\n                    element.play();\r\n                }\r\n            }\r\n\r\n            // Setup the recorder\r\n            this.#recorder = new MediaRecorder(stream, this.#buildConfig());\r\n            this.#recorder.addEventListener('dataavailable', event => this.#onDataAvailable(event));\r\n            this.#recorder.addEventListener('error', error => this.fire('OnError', [error.name, error.message]));\r\n            this.#recorder.addEventListener('pause', () => this.fire('OnPause', [this.#recorder.state]));\r\n            this.#recorder.addEventListener('resume', () => this.fire('OnResume', [this.#recorder.state]));\r\n            this.#recorder.addEventListener('start', () => this.fire('OnStart', [this.#recorder.state]));\r\n            this.#recorder.addEventListener('stop', () => this.#onStop());\r\n\r\n            // Let them know what we got\r\n            this.fireEx({\r\n                sEvent: 'OnConnect',\r\n                aParams: [this.#recorder.state],\r\n                tActionData: {\r\n                    mimeType: this.#recorder.mimeType,\r\n                    videoBitsPerSecond: this.#recorder.videoBitsPerSecond,\r\n                    audioBitsPerSecond: this.#recorder.audioBitsPerSecond,\r\n                    audioBitrateMode: this.#recorder.audioBitrateMode ?? '',\r\n                    tracks\r\n                }\r\n            });\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n\r\n    #buildConfig() {\r\n        const config = {};\r\n        if (this.psMimeType !== '') {\r\n            config.mimeType = this.psMimeType;\r\n        }\r\n        if (this.piAudioBitsPerSecond !== 0) {\r\n            config.audioBitsPerSecond = this.piAudioBitsPerSecond;\r\n        }\r\n        if (this.piVideoBitsPerSecond !== 0) {\r\n            config.videoBitsPerSecond = this.piVideoBitsPerSecond;\r\n        }\r\n        if (this.piBitsPerSecond !== 0) {\r\n            config.bitsPerSecond = this.piBitsPerSecond;\r\n        }\r\n        if (this.peAudioBitrateMode !== MSR_DEFAULT) {\r\n            config.audioBitrateMode = audioBitrateModeMap[this.peAudioBitrateMode];\r\n        }\r\n        if (this.pnVideoKeyFrameIntervalDuration !== 0) {\r\n            config.videoKeyFrameIntervalDuration = this.pnVideoKeyFrameIntervalDuration;\r\n        }\r\n        if (this.piVideoKeyFrameIntervalCount !== 0) {\r\n            config.videoKeyFrameIntervalCount = this.piVideoKeyFrameIntervalCount;\r\n        }\r\n        return config;\r\n    }\r\n\r\n    start(timeslice) {\r\n        if (timeslice) {\r\n            timeslice = df.toInt(timeslice);\r\n        }\r\n        this.#recorder?.start(timeslice);\r\n    }\r\n\r\n    stop() {\r\n        this.#recorder?.stop();\r\n    }\r\n\r\n    pause() {\r\n        this.#recorder?.pause();\r\n    }\r\n\r\n    resume() {\r\n        this.#recorder?.resume();\r\n    }\r\n\r\n    requestData() {\r\n        this.#recorder?.requestData();\r\n    }\r\n\r\n    disconnect() {\r\n        this.#streams?.forEach(stream => stream.disconnect());\r\n        this.#streams = null;\r\n        this.#recorder = null;\r\n        this.fire('OnDisconnect');\r\n    }\r\n\r\n    attachRecording(elementId) {\r\n        const element = document.getElementById(elementId);\r\n        if (this.#objectUrl && element) {\r\n            element.srcObject = null;\r\n            element.src = this.#objectUrl;\r\n        }\r\n    }\r\n\r\n    async #onDataAvailable(event) {\r\n        this.#chunks.push(event.data);\r\n\r\n        // Fire client-side event with the Blob\r\n        this.fireEx({ sEvent: 'OnDataAvailable', aParams: [event.data], bSkipServer: true });\r\n\r\n        // Let the 'onStop' handler know that we're processing data\r\n        const { promise, resolve } = Promise.withResolvers();\r\n        this.#processingData = promise;\r\n\r\n        try {\r\n            // Fire server-side event with a DataURL string\r\n            const dataUrl = await readBlob(event.data);\r\n            this.fireEx({ sEvent: 'OnDataAvailable', aParams: [dataUrl], bSkipClient: true });\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n\r\n        // Let the 'onStop' handler know that we're done processing data\r\n        resolve();\r\n        this.#processingData = null;\r\n    }\r\n\r\n    async #onStop() {\r\n        // MediaRecorder always fires 'stop' after the last 'dataavailable', but because we await data conversion in\r\n        // #onDataAvailable, before we forward the event, this method could be called during that await.\r\n        // So we await #processingData here to ensure the correct order of events on the server.\r\n        await this.#processingData;\r\n        if (this.#objectUrl) {\r\n            URL.revokeObjectURL(this.#objectUrl);\r\n        }\r\n        const blob = new Blob(this.#chunks, { type: this.#chunks[0].type });\r\n        this.#objectUrl = URL.createObjectURL(blob);\r\n        this.#chunks = [];\r\n        this.fire('OnStop', [this.#recorder?.state ?? '']);\r\n    }\r\n\r\n    set_paMediaStreams(value) {\r\n        this.#aMediaStreams = df.sys.vt.deserialize(value, [df.tString]);\r\n        if (!Array.isArray(this.#aMediaStreams)) {\r\n            this.#aMediaStreams = [];\r\n        }\r\n    }\r\n\r\n    get_paMediaStreams() {\r\n        return df.sys.vt.serialize(this.#aMediaStreams, [df.tString]);\r\n    }\r\n}\r\n","function fix(val, def) {\r\n    return (val !== undefined && val !== Infinity) ? val : def;\r\n}\r\n\r\nexport default class NetworkInformation extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n\r\n        this.prop(df.tNumber, 'pnDownlink', 0);\r\n        this.prop(df.tNumber, 'pnDownlinkMax', 0);\r\n        this.prop(df.tString, 'psEffectiveType', '');\r\n        this.prop(df.tInt, 'piRTT', 0);\r\n        this.prop(df.tBool, 'pbSaveData', false);\r\n        this.prop(df.tString, 'psType', '');\r\n\r\n        this.event('OnNetworkChange', df.cCallModeDefault);\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'connection' in navigator);\r\n        if (this.pbIsSupported) {\r\n            this.update();\r\n            navigator.connection.addEventListener('change', () => {\r\n                this.update();\r\n                this.fire('OnNetworkChange');\r\n            });\r\n        }\r\n    }\r\n\r\n    update() {\r\n        const con = navigator.connection;\r\n                \r\n        this.set('pnDownlink', fix(con.downlink, 0));\r\n        this.set('pnDownlinkMax', fix(con.downlinkMax, 0));\r\n        this.set('psEffectiveType', fix(con.effectiveType, ''));\r\n        this.set('piRTT', fix(con.rtt, 0));\r\n        this.set('pbSaveData', fix(con.saveData, false));\r\n        this.set('psType', fix(con.type, ''));\r\n    }\r\n}","const notifications = [];\r\n\r\nexport default class Notifications extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.prop(df.tString, 'psPermission', '');\r\n        this.event('OnPermissionChange', df.cCallModeDefault);\r\n        this.event('OnClick', df.cCallModeDefault);\r\n        this.event('OnClose', df.cCallModeDefault);\r\n        this.event('OnError', df.cCallModeDefault);\r\n        this.event('OnShow', df.cCallModeDefault);\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'Notification' in window);\r\n        if (this.pbIsSupported) {\r\n            this.set('psPermission', Notification.permission);\r\n        }\r\n    }\r\n\r\n    async requestPermission() {\r\n        const permission = await Notification.requestPermission();\r\n        this.set('psPermission', permission);\r\n        this.fire('OnPermissionChange');\r\n    }\r\n\r\n    createNotification() {\r\n        const data = this._tActionData;\r\n        try {\r\n            const notification = new Notification(data.sTitle, {\r\n                dir: data.sDir || undefined,\r\n                lang: data.sLang || undefined,\r\n                badge: data.sBadge || undefined,\r\n                body: data.sBody || undefined,\r\n                tag: data.sTag || undefined,\r\n                icon: data.sIcon || undefined,\r\n                image: data.sImage || undefined,\r\n                data: data.data || undefined,\r\n                vibrate: data.aVibrate,\r\n                renotify: data.bReNotify,\r\n                requireInteraction: data.bRequireInteraction,\r\n                silent: data.bSilent\r\n            });\r\n            notification.addEventListener('click', () => this.fire('OnClick', [data.id]));\r\n            notification.addEventListener('close', () => this.fire('OnClose', [data.id]));\r\n            notification.addEventListener('error', error => this.fire('OnError', [data.id, error.message]));\r\n            notification.addEventListener('show', () => this.fire('OnShow', [data.id]));\r\n            notifications.push({ id: data.id, notification });\r\n        }\r\n        catch (error) {\r\n            this.fire('OnError', [data.id, error.message]);\r\n        }\r\n    }\r\n\r\n    closeNotification(idString) {\r\n        const id = parseInt(idString, 10);\r\n        const record = notifications.find(n => n.id === id);\r\n        if (record) {\r\n            record.notification.close();\r\n            notifications.splice(notifications.indexOf(record), 1);\r\n        }\r\n    }\r\n}\r\n","export default class PageVisibility extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.event('OnVisibilityChange', df.cCallModeDefault);\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', typeof document.visibilityState !== 'undefined');\r\n        if (this.pbIsSupported) {\r\n            document.addEventListener('visibilitychange', () => {\r\n                this.fire('OnVisibilityChange', [document.visibilityState]);\r\n            });\r\n        }\r\n    }\r\n}\r\n","export default class ScreenOrientation extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.event('OnChange');\r\n        this.event('OnLock');\r\n        this.event('OnError');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', typeof window?.screen?.orientation !== 'undefined');\r\n        if (this.pbIsSupported) {\r\n            window.screen.orientation.addEventListener('change', event => {\r\n                this.fire('OnChange', [event.target.type, event.target.angle]);\r\n            });\r\n        }\r\n    }\r\n\r\n    async lock(orientation) {\r\n        try {\r\n            await window.screen.orientation.lock(orientation);\r\n            requestIdleCallback(() => this.fire('OnLock', [window.screen.orientation.type])); // because orientation.type is actually not updated yet when promise resolves\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n\r\n    unlock() {\r\n        try {\r\n            window.screen.orientation.unlock();\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n}","export default class ScreenWakeLock extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.event('OnSuccess', df.cCallModeDefault);\r\n        this.event('OnError', df.cCallModeDefault);\r\n        this.event('OnRelease', df.cCallModeDefault);\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'wakeLock' in navigator);\r\n    }\r\n\r\n    async request() {\r\n        try {\r\n            this._wakeLock = await navigator.wakeLock.request('screen');\r\n            this._wakeLock.addEventListener('release', () => this.fire('OnRelease'));\r\n            this.fire('OnSuccess');\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n\r\n    async release() {\r\n        if (this._wakeLock) {\r\n            await this._wakeLock.release();\r\n            this._wakeLock = null;\r\n        }\r\n    }\r\n}\r\n","import { queryPermission } from \"./utils/permissions\";\r\n\r\nclass Sensor extends df.WebObject {\r\n    #sensorConstructor;\r\n    #sensor;\r\n    #permissions = [];\r\n\r\n    constructor(sName, oParent, fSensorConstructor) {\r\n        super(sName, oParent);\r\n        this.#sensorConstructor = fSensorConstructor;\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.event('OnActivate');\r\n        this.event('OnReading');\r\n        this.event('OnError');\r\n    }\r\n\r\n    get sensor() {\r\n        return this.#sensor;\r\n    }\r\n\r\n    set sensor(val) {\r\n        val.addEventListener('activate', () => this.fire('OnActivate'));\r\n        val.addEventListener('reading', () => this.fire('OnReading', this.reading));\r\n        val.addEventListener('error', event => this.fire('OnError', [event.error.name, event.error.message]));\r\n        this.#sensor = val;\r\n    }\r\n\r\n    createSensor(options) {\r\n        this.stop();\r\n        if (this.pbIsSupported) {\r\n            try {\r\n                this.sensor = new this.#sensorConstructor(options);\r\n            }\r\n            catch (error) {\r\n                this.fire('OnError', [error.name, error.message]);\r\n            }\r\n        }\r\n    }\r\n\r\n    get reading() {\r\n        return [];\r\n    }\r\n\r\n    configurePermission(permission, property, event) {\r\n        this.prop(df.tString, property, '');\r\n        this.event(event);\r\n        this.#permissions.push([permission, property, event]);\r\n    }\r\n\r\n    async start() {\r\n        const queries = this.#permissions.map(perm => queryPermission(this, ...perm));\r\n        const results = await Promise.all(queries);\r\n        if (results.every(result => result === 'granted')) {\r\n            this.#sensor?.start();\r\n        }\r\n        else {\r\n            this.fire('OnError', ['SensorPermissionError', 'No permission to use this sensor']);\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        this.#sensor?.stop();\r\n    }\r\n\r\n    destroy() {\r\n        this.stop();\r\n        super.destroy();\r\n    }\r\n}\r\n\r\nclass FrequencySensor extends Sensor {\r\n    constructor(sName, oParent, fSensorConstructor) {\r\n        super(sName, oParent, fSensorConstructor);\r\n        this.prop(df.tNumber, 'pnFrequency', 1);\r\n    }\r\n\r\n    set_pnFrequency(nFrequency) {\r\n        this.createSensor({ frequency: nFrequency });\r\n    }\r\n}\r\n\r\nclass ReferenceFrameSensor extends FrequencySensor {\r\n    constructor(sName, oParent, fSensorConstructor) {\r\n        super(sName, oParent, fSensorConstructor);\r\n        this.prop(df.tString, 'psReferenceFrame', 'device');\r\n    }\r\n\r\n    set_pnFrequency(nFrequency) {\r\n        this.createSensor({ frequency: nFrequency, referenceFrame: this.psReferenceFrame });\r\n    }\r\n\r\n    set_psReferenceFrame(sReferenceFrame) {\r\n        this.createSensor({ frequency: this.pnFrequency, referenceFrame: sReferenceFrame });\r\n    }\r\n}\r\n\r\nexport class AbsoluteOrientationSensor extends ReferenceFrameSensor {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent, window.AbsoluteOrientationSensor);\r\n        this.configurePermission('accelerometer', 'psAccelerometerPermission', 'OnAccelerometerPermissionChange');\r\n        this.configurePermission('magnetometer', 'psMagnetometerPermission', 'OnMagnetometerPermissionChange');\r\n        this.configurePermission('gyroscope', 'psGyroscopePermission', 'OnGyroscopePermissionChange');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'AbsoluteOrientationSensor' in window);\r\n        this.createSensor({ frequency: this.pnFrequency, referenceFrame: this.psReferenceFrame });\r\n    }\r\n\r\n    get reading() {\r\n        return this.sensor.quaternion;\r\n    }\r\n}\r\n\r\nexport class AccelerometerSensor extends ReferenceFrameSensor {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent, window.Accelerometer);\r\n        this.configurePermission('accelerometer', 'psAccelerometerPermission', 'OnAccelerometerPermissionChange');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'Accelerometer' in window);\r\n        this.createSensor({ frequency: this.pnFrequency, referenceFrame: this.psReferenceFrame });\r\n    }\r\n\r\n    get reading() {\r\n        return [this.sensor.x, this.sensor.y, this.sensor.z];\r\n    }\r\n}\r\n\r\nexport class AmbientLightSensor extends FrequencySensor {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent, window.AmbientLightSensor);\r\n        this.configurePermission('ambient-light-sensor', 'psAmbientLightSensorPermission', 'OnAmbientLightSensorPermissionChange');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'AmbientLightSensor' in window);\r\n        this.createSensor({ frequency: this.pnFrequency });\r\n    }\r\n\r\n    get reading() {\r\n        return [this.sensor.illuminance];\r\n    }\r\n}\r\n\r\nexport class GravitySensor extends ReferenceFrameSensor {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent, window.GravitySensor);\r\n        this.configurePermission('accelerometer', 'psAccelerometerPermission', 'OnAccelerometerPermissionChange');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'GravitySensor' in window);\r\n        this.createSensor({ frequency: this.pnFrequency, referenceFrame: this.psReferenceFrame });\r\n    }\r\n\r\n    get reading() {\r\n        return [this.sensor.x, this.sensor.y, this.sensor.z];\r\n    }\r\n}\r\n\r\nexport class GyroscopeSensor extends ReferenceFrameSensor {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent, window.Gyroscope);\r\n        this.configurePermission('gyroscope', 'psGyroscopePermission', 'OnGyroscopePermissionChange');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'Gyroscope' in window);\r\n        this.createSensor({ frequency: this.pnFrequency, referenceFrame: this.psReferenceFrame });\r\n    }\r\n\r\n    get reading() {\r\n        return [this.sensor.x, this.sensor.y, this.sensor.z];\r\n    }\r\n}\r\n\r\nexport class LinearAccelerationSensor extends ReferenceFrameSensor {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent, window.LinearAccelerationSensor);\r\n        this.configurePermission('accelerometer', 'psAccelerometerPermission', 'OnAccelerometerPermissionChange');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'LinearAccelerationSensor' in window);\r\n        this.createSensor({ frequency: this.pnFrequency, referenceFrame: this.psReferenceFrame });\r\n    }\r\n\r\n    get reading() {\r\n        return [this.sensor.x, this.sensor.y, this.sensor.z];\r\n    }\r\n}\r\n\r\nexport class MagnetometerSensor extends ReferenceFrameSensor {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent, window.Magnetometer);\r\n        this.configurePermission('magnetometer', 'psMagnetometerPermission', 'OnMagnetometerPermissionChange');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'Magnetometer' in window);\r\n        this.createSensor({ frequency: this.pnFrequency, referenceFrame: this.psReferenceFrame });\r\n    }\r\n\r\n    get reading() {\r\n        return [this.sensor.x, this.sensor.y, this.sensor.z];\r\n    }\r\n}\r\n\r\nexport class RelativeOrientationSensor extends ReferenceFrameSensor {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent, window.RelativeOrientationSensor);\r\n        this.configurePermission('accelerometer', 'psAccelerometerPermission', 'OnAccelerometerPermissionChange');\r\n        this.configurePermission('gyroscope', 'psGyroscopePermission', 'OnGyroscopePermissionChange');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'RelativeOrientationSensor' in window);\r\n        this.createSensor({ frequency: this.pnFrequency, referenceFrame: this.psReferenceFrame });\r\n    }\r\n\r\n    get reading() {\r\n        return this.sensor.quaternion;\r\n    }\r\n}\r\n","export default class Vibration extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'vibrate' in navigator);\r\n    }\r\n\r\n    vibrate() {\r\n        navigator.vibrate(arguments);\r\n    }\r\n}\r\n","export default class WebShare extends df.WebObject {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent);\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.event('OnSuccess', df.cCallModeDefault);\r\n        this.event('OnError', df.cCallModeDefault);\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', 'share' in navigator);\r\n    }\r\n\r\n    async share(text, title, url) {\r\n        const data = {\r\n            text: text || undefined,\r\n            title: title || undefined,\r\n            url\r\n        };\r\n        try {\r\n            const files = await Promise.all(this._tActionData?.aFiles?.map(info => this.toFile(info)) || []);\r\n            if (files.length > 0) {\r\n                if (navigator.canShare?.({ files })) {\r\n                    data.files = files;\r\n                } else {\r\n                    throw ({ name: 'CantShareError', message: 'These files can\\'t be shared' });\r\n                }\r\n            }\r\n            await navigator.share(data);\r\n            this.fire('OnSuccess');\r\n        } catch (error) {\r\n            this.fire('OnError', [error.name, error.message]);\r\n        }\r\n    }\r\n\r\n    async toFile(info) {\r\n        const response = await fetch(info.sURL, { credentials: 'same-origin' });\r\n        const data = await response.blob();\r\n        return new File([data], info.sName, {\r\n            type: info.sContentType,\r\n        });\r\n    }\r\n}\r\n","function storageAvailable(type) {\r\n    let storage;\r\n    try {\r\n        storage = window[type];\r\n        const x = \"__storage_test__\";\r\n        storage.setItem(x, x);\r\n        storage.removeItem(x);\r\n        return true;\r\n    } catch (e) {\r\n        return (\r\n            e instanceof DOMException &&\r\n            // everything except Firefox\r\n            (e.code === 22 ||\r\n                // Firefox\r\n                e.code === 1014 ||\r\n                // test name field too, because code might not be present\r\n                // everything except Firefox\r\n                e.name === \"QuotaExceededError\" ||\r\n                // Firefox\r\n                e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\r\n            // acknowledge QuotaExceededError only if there's something already stored\r\n            storage &&\r\n            storage.length !== 0\r\n        );\r\n    }\r\n}\r\n\r\nclass WebStorage extends df.WebObject {\r\n    #storage;\r\n\r\n    constructor(sName, oParent, sStorage) {\r\n        super(sName, oParent);\r\n        this.#storage = sStorage;\r\n        this.prop(df.tBool, 'pbIsSupported', false);\r\n        this.prop(df.tInt, 'piLength', 0);\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        this.set('pbIsSupported', storageAvailable(this.#storage));\r\n        if (this.pbIsSupported) {\r\n            this.#storage = window[this.#storage];\r\n            this.#updateLength();\r\n        }\r\n    }\r\n\r\n    #updateLength() {\r\n        this.set('piLength', this.#storage.length);\r\n    }\r\n\r\n    #findObj(sName) {\r\n        const obj = this.getWebApp().findObj(sName);\r\n\r\n        if (!obj) {\r\n            throw new df.Error(999, \"Return WebObject not found '{{0}}'\", this, [sName]);\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    #return(obj, msg, ...args) {\r\n        this.#findObj(obj).serverAction(msg, args);\r\n    }\r\n\r\n    key(obj, msg, index) {\r\n        this.#return(obj, msg, this.#storage.key(parseInt(index)));\r\n    }\r\n\r\n    getItem(obj, msg, keyName) {\r\n        const value = this.#storage.getItem(keyName);\r\n        if (value !== null) {\r\n            this.#return(obj, msg, value);\r\n        }\r\n    }\r\n\r\n    setItem(keyName, keyValue) {\r\n        this.#storage.setItem(keyName, keyValue);\r\n        this.#updateLength();\r\n    }\r\n\r\n    removeItem(keyName) {\r\n        this.#storage.removeItem(keyName);\r\n        this.#updateLength();\r\n    }\r\n\r\n    clear() {\r\n        this.#storage.clear();\r\n        this.#updateLength();\r\n    }\r\n}\r\n\r\nexport class LocalStorage extends WebStorage {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent, 'localStorage');\r\n        this.event('OnStorage');\r\n    }\r\n\r\n    create(tDef) {\r\n        super.create(tDef);\r\n        if (this.pbIsSupported) {\r\n            window.addEventListener('storage', event => {\r\n                console.log(event);\r\n                this.fire('OnStorage', [event.key || '', event.newValue || '', event.oldValue || '', event.url]);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport class SessionStorage extends WebStorage {\r\n    constructor(sName, oParent) {\r\n        super(sName, oParent, 'sessionStorage');\r\n    }\r\n}\r\n","import BroadcastChannel from './broadcast-channel';\r\nimport Clipboard from './clipboard';\r\nimport ContactPicker from './contact-picker';\r\nimport CredentialManagement from './credential-management';\r\nimport EyeDropper from './eye-dropper';\r\nimport Fullscreen from './fullscreen';\r\nimport { DisplayMediaStream, UserMediaStream } from './mediastream';\r\nimport MediaStreamRecording from './mediastream-recording';\r\nimport NetworkInformation from './network-information';\r\nimport Notifications from './notifications';\r\nimport PageVisibility from './page-visibility';\r\nimport ScreenOrientation from './screen-orientation';\r\nimport ScreenWakeLock from './screen-wake-lock';\r\nimport {\r\n    AbsoluteOrientationSensor,\r\n    AccelerometerSensor,\r\n    AmbientLightSensor,\r\n    GravitySensor,\r\n    GyroscopeSensor,\r\n    LinearAccelerationSensor,\r\n    MagnetometerSensor,\r\n    RelativeOrientationSensor\r\n} from './sensor';\r\nimport Vibration from './vibration';\r\nimport WebShare from './web-share';\r\nimport { LocalStorage, SessionStorage } from './web-storage';\r\n\r\nglobal.WebAPIs = {\r\n    AbsoluteOrientationSensor,\r\n    AccelerometerSensor,\r\n    AmbientLightSensor,\r\n    BroadcastChannel,\r\n    Clipboard,\r\n    ContactPicker,\r\n    CredentialManagement,\r\n    DisplayMediaStream,\r\n    EyeDropper,\r\n    Fullscreen,\r\n    GravitySensor,\r\n    GyroscopeSensor,\r\n    LinearAccelerationSensor,\r\n    LocalStorage,\r\n    MagnetometerSensor,\r\n    MediaStreamRecording,\r\n    NetworkInformation,\r\n    Notifications,\r\n    PageVisibility,\r\n    RelativeOrientationSensor,\r\n    ScreenOrientation,\r\n    ScreenWakeLock,\r\n    SessionStorage,\r\n    UserMediaStream,\r\n    Vibration,\r\n    WebShare\r\n};\r\n"],"names":["__webpack_require__","g","globalThis","this","Function","e","window","BroadcastChannelComponent","df","WebObject","constructor","sName","oParent","super","prop","tBool","tString","event","cCallModeDefault","create","tDef","set","BroadcastChannel","pbIsSupported","psName","_channel","addEventListener","fire","data","postMessage","sData","readBlob","blob","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","async","queryPermission","instance","name","property","navigator","permissions","query","state","status","onchange","message","Clipboard","read","items","clipboard","all","map","item","types","getType","type","fireEx","sEvent","tActionData","readText","text","write","url","response","fetch","ClipboardItem","writeText","ContactPicker","properties","contacts","getProperties","join","select","params","_tActionData","aProperties","multiple","bMultiple","JSON","stringify","CredentialManagement","PasswordCredential","FederatedCredential","getCredential","options","c","credentials","get","credential","id","iconURL","password","provider","protocol","console","log","store","storePassword","undefined","storeFederated","federated","preventSilentAccess","EyeDropperComponent","_abortController","AbortController","EyeDropper","open","signal","sRGBHex","abort","Fullscreen","getDfObjName","obj","dataset","dfobj","parentElement","document","fullscreenEnabled","dom","on","onFullscreenChange","onFullscreenError","destroy","off","exitFullscreen","requestFullscreen","sObjName","getWebApp","findObj","_eElem","sizeHeight","fullscreenElement","MSAPI_DEFAULT","MSAPI_FACING_MODE_USER","MSAPI_FACING_MODE_ENVIRONMENT","MSAPI_FACING_MODE_LEFT","MSAPI_FACING_MODE_RIGHT","MSAPI_RESIZE_MODE_NONE","MSAPI_RESIZE_MODE_CROP_AND_SCALE","MSAPI_DISPLAY_SURFACE_BROWSER","MSAPI_DISPLAY_SURFACE_WINDOW","MSAPI_DISPLAY_SURFACE_MONITOR","facingModeMap","resizeModeMap","includeExcludeMap","true","false","displaySurfaceMap","BaseMediaStream","stream","disconnect","getTracks","forEach","track","stop","MSR_AUDIO_BITRATE_MODE_CONSTANT","MSR_AUDIO_BITRATE_MODE_VARIABLE","audioBitrateModeMap","MediaStreamRecording","tAdv","tInt","tNumber","MediaRecorder","paMediaStreams","set_paMediaStreams","URL","revokeObjectURL","Error","msg","_len","arguments","length","args","Array","_key","serverAction","isTypeSupported","mimeType","toServerType","connect","elementId","webApp","streams","s","MediaStream","flatMap","tracks","push","kind","label","settings","getSettings","element","getElementById","src","srcObject","play","aParams","videoBitsPerSecond","audioBitsPerSecond","audioBitrateMode","config","psMimeType","piAudioBitsPerSecond","piVideoBitsPerSecond","piBitsPerSecond","bitsPerSecond","peAudioBitrateMode","pnVideoKeyFrameIntervalDuration","videoKeyFrameIntervalDuration","piVideoKeyFrameIntervalCount","videoKeyFrameIntervalCount","start","timeslice","toInt","pause","resume","requestData","attachRecording","bSkipServer","promise","withResolvers","dataUrl","bSkipClient","Blob","createObjectURL","value","sys","vt","deserialize","isArray","get_paMediaStreams","serialize","fix","val","def","Infinity","NetworkInformation","update","connection","con","downlink","downlinkMax","effectiveType","rtt","saveData","notifications","Notifications","Notification","permission","requestPermission","createNotification","notification","sTitle","dir","sDir","lang","sLang","badge","sBadge","body","sBody","tag","sTag","icon","sIcon","image","sImage","vibrate","aVibrate","renotify","bReNotify","requireInteraction","bRequireInteraction","silent","bSilent","closeNotification","idString","parseInt","record","find","n","close","splice","indexOf","PageVisibility","visibilityState","ScreenOrientation","screen","orientation","target","angle","lock","requestIdleCallback","unlock","ScreenWakeLock","request","_wakeLock","wakeLock","release","Sensor","fSensorConstructor","sensor","reading","createSensor","configurePermission","queries","perm","every","FrequencySensor","set_pnFrequency","nFrequency","frequency","ReferenceFrameSensor","referenceFrame","psReferenceFrame","set_psReferenceFrame","sReferenceFrame","pnFrequency","Vibration","WebShare","share","title","files","aFiles","info","toFile","canShare","sURL","File","sContentType","WebStorage","sStorage","storage","x","setItem","removeItem","DOMException","code","storageAvailable","key","index","getItem","keyName","keyValue","clear","global","WebAPIs","AbsoluteOrientationSensor","quaternion","AccelerometerSensor","Accelerometer","y","z","AmbientLightSensor","illuminance","DisplayMediaStream","mediaDevices","getDisplayMedia","constraints","audio","pbAudio","monitorTypeSurfaces","pbMonitorTypeSurfaces","preferCurrentTab","pbPreferCurrentTab","selfBrowserSurface","pbSelfBrowserSurface","surfaceSwitching","pbSurfaceSwitching","systemAudio","pbSystemAudio","peDisplaySurface","video","displaySurface","GravitySensor","GyroscopeSensor","Gyroscope","LinearAccelerationSensor","LocalStorage","newValue","oldValue","MagnetometerSensor","Magnetometer","RelativeOrientationSensor","SessionStorage","UserMediaStream","getUserMedia","enumerateDevices","pbVideo","filtered","filter","d","psAudioDeviceId","deviceId","peAutoGainControl","autoGainControl","piChannelCount","channelCount","peEchoCancellation","echoCancellation","pnLatency","latency","peNoiseSuppression","noiseSuppression","piSampleRate","sampleRate","piSampleSize","sampleSize","psVideoDeviceId","pnAspectRatio","aspectRatio","peFacingMode","facingMode","pnFrameRate","frameRate","piHeight","height","piWidth","width","peResizeMode","resizeMode"],"sourceRoot":""}