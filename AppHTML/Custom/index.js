!function(){"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();class t extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.prop(df.tString,"psName",""),this.event("OnMessage",df.cCallModeDefault)}create(e){super.create(e),this.set("pbIsSupported",!!window.BroadcastChannel),this.pbIsSupported&&""!==this.psName&&(this._channel=new BroadcastChannel(this.psName),this._channel.addEventListener("message",(e=>{this.fire("OnMessage",[e.data])})))}postMessage(e){this._channel.postMessage(e)}}function s(e){return new Promise(((t,s)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>s(r.error),r.readAsDataURL(e)}))}async function r(e,t,s,r){try{const i=await navigator.permissions.query({name:t});return e.set(s,i.state||i.status),r&&(i.onchange=()=>{e.set(s,i.state||i.status),e.fire(r)}),i.state||i.status}catch(t){e.fire("OnError",[t.name,t.message])}}class i extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.prop(df.tString,"psReadPermission",""),this.prop(df.tString,"psWritePermission",""),this.event("OnReadPermissionChange"),this.event("OnWritePermissionChange"),this.event("OnRead",df.cCallModeDefault,"OnReadProxy"),this.event("OnReadText"),this.event("OnWrite"),this.event("OnWriteText"),this.event("OnError")}create(e){super.create(e),this.set("pbIsSupported","clipboard"in navigator),this.pbIsSupported&&"permissions"in navigator&&(r(this,"clipboard-read","psReadPermission","OnReadPermissionChange"),r(this,"clipboard-write","psWritePermission","OnWritePermissionChange"))}async read(){const e=await navigator.clipboard.read(),t=await Promise.all(e.map((e=>Promise.all(e.types.map((async t=>s(await e.getType(t))))))));this.fireEx({sEvent:"OnRead",tActionData:t})}async readText(){try{const e=await navigator.clipboard.readText();this.fire("OnReadText",[e])}catch(e){this.fire("OnError",[e.name,e.message])}}async write(e){try{const t=await fetch(e),s=await t.blob(),r=[new ClipboardItem({[s.type]:s})];await navigator.clipboard.write(r),this.fire("OnWrite")}catch(e){this.fire("OnError",[e.name,e.message])}}async writeText(e){try{await navigator.clipboard.writeText(e),this.fire("OnWriteText")}catch(e){this.fire("OnError",[e.name,e.message])}}}class n extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.prop(df.tString,"psSupportedProperties",""),this.event("OnSelect",df.cCallModeDefault)}async create(e){if(super.create(e),this.set("pbIsSupported","contacts"in navigator),this.pbIsSupported){const e=await navigator.contacts.getProperties();this.set("psSupportedProperties",e.join(","))}}async select(){const e=this._tActionData,t=await navigator.contacts.select(e.aProperties,{multiple:e.bMultiple});this.fire("OnSelect",[JSON.stringify(t)])}}class o extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.event("OnCredential",df.cCallModeDefault,"OnCredentialProxy"),this.event("OnSuccess"),this.event("OnError")}create(e){super.create(e),this.set("pbIsSupported",window.PasswordCredential||window.FederatedCredential)}async getCredential(){const e=this._tActionData,t=await navigator.credentials.get(e),s={id:t.id,type:t.type,iconURL:t.iconURL,name:t.name,password:t.password,provider:t.provider,protocol:t.protocol};this.fireEx({sEvent:"OnCredential",tActionData:s})}async#e(e){try{const t=await navigator.credentials.create(e);console.log({credential:t}),t?(await navigator.credentials.store(t),this.fire("OnSuccess")):this.fire("OnError",["CredentialCreationError","Unable to create credential based on these options"])}catch(e){this.fire("OnError",[e.name,e.message])}}storePassword(e,t,s,r){const i={password:{id:e,name:t||void 0,iconURL:s||void 0,password:r}};this.#e(i)}storeFederated(e,t,s,r,i){const n={federated:{id:e,name:t||void 0,iconURL:s||void 0,provider:r,protocol:i||void 0}};this.#e(n)}async preventSilentAccess(){try{await navigator.credentials.preventSilentAccess(),this.fire("OnSuccess")}catch(e){this.fire("OnError",[e.name,e.message])}}}class a extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.event("OnSelect",df.cCallModeDefault),this._abortController=new AbortController}create(e){super.create(e),this.set("pbIsSupported",!!window.EyeDropper)}async open(){const e=await(new EyeDropper).open({signal:this._abortController.signal});this.fire("OnSelect",[e.sRGBHex])}abort(){this._abortController.abort()}}class c extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.event("OnFullscreenChange",df.cCallModeDefault),this.event("OnFullscreenError",df.cCallModeDefault)}static getDfObjName(e){return e.dataset.dfobj?e.dataset.dfobj:e.parentElement?c.getDfObjName(e.parentElement):void 0}create(e){super.create(e),this.set("pbIsSupported",document.fullscreenEnabled),this.pbIsSupported&&(df.dom.on("fullscreenchange",document,this.onFullscreenChange,this),df.dom.on("fullscreenerror",document,this.onFullscreenError,this))}destroy(){df.dom.off("fullscreenchange",document,this.onFullscreenChange,this),df.dom.off("fullscreenerror",document,this.onFullscreenError,this),super.destroy()}exitFullscreen(){document.exitFullscreen()}async requestFullscreen(e){const t=this.getWebApp().findObj(e);t&&(await t._eElem.requestFullscreen(),t.sizeHeight?.(-1))}onFullscreenChange(){this.fire("OnFullscreenChange",[document.fullscreenElement?c.getDfObjName(document.fullscreenElement):""])}onFullscreenError(){this.fire("OnFullscreenError")}}const p=-1,d=0,h=1,u=2,l=3,f=0,m=1,g=0,v=1,b=2,S={[d]:"user",[h]:"environment",[u]:"left",[l]:"right"},y={[f]:"none",[m]:"crop-and-scale"},O={true:"include",false:"exclude"},w={[g]:"browser",[v]:"window",[b]:"monitor"};class C extends df.WebObject{stream;constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.event("OnError")}disconnect(){this.stream?.getTracks().forEach((e=>e.stop())),this.stream=null}}const I=0,P=1,E={[I]:"constant",[P]:"variable"};class D extends df.WebObject{#t=[];#s;#r;#i=[];#n;#o;constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.prop(df.tAdv,"paMediaStreams",null),this.prop(df.tString,"psMimeType",""),this.prop(df.tInt,"piAudioBitsPerSecond",0),this.prop(df.tInt,"piVideoBitsPerSecond",0),this.prop(df.tInt,"piBitsPerSecond",0),this.prop(df.tInt,"peAudioBitrateMode",-1),this.prop(df.tNumber,"pnVideoKeyFrameIntervalDuration",0),this.prop(df.tInt,"piVideoKeyFrameIntervalCount",0),this.event("OnConnect",df.cCallModeDefault,"OnConnectProxy"),this.event("OnDisconnect"),this.event("OnError"),this.event("OnPause"),this.event("OnResume"),this.event("OnStart"),this.event("OnStop"),this.event("OnDataAvailable",df.cCallModeDefault,"OnDataAvailableProxy")}create(e){super.create(e),this.set("pbIsSupported",!!window.MediaRecorder),this.paMediaStreams&&this.set_paMediaStreams(this.paMediaStreams)}destroy(){this.#n&&URL.revokeObjectURL(this.#n),super.destroy()}#a(e){const t=this.getWebApp().findObj(e);if(!t)throw new df.Error(999,"Return WebObject not found '{{0}}'",this,[e]);return t}#c(e,t){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];this.#a(e).serverAction(t,r)}isTypeSupported(e,t,s){const r=MediaRecorder.isTypeSupported(s);this.#c(e,t,s,this.toServerType(r,df.tBool))}async connect(e){try{if(0===this.#t.length)throw new Error("No media streams to connect to");const t=this.getWebApp();let s;if(this.#s=this.#t.map((e=>t.findObj(e))),1===this.#s.length)s=await this.#s[0].connect();else{const e=await Promise.all(this.#s.map((e=>e.connect())));s=new MediaStream(e.flatMap((e=>e.getTracks())))}const r=[];if(s.getTracks().forEach((e=>{r.push({kind:e.kind,label:e.label,settings:e.getSettings()}),e.addEventListener("ended",(()=>this.disconnect()))})),e){const t=document.getElementById(e);t&&(t.src=null,t.srcObject=s,t.play())}this.#r=new MediaRecorder(s,this.#p()),this.#r.addEventListener("dataavailable",(e=>this.#d(e))),this.#r.addEventListener("error",(e=>this.fire("OnError",[e.name,e.message]))),this.#r.addEventListener("pause",(()=>this.fire("OnPause",[this.#r.state]))),this.#r.addEventListener("resume",(()=>this.fire("OnResume",[this.#r.state]))),this.#r.addEventListener("start",(()=>this.fire("OnStart",[this.#r.state]))),this.#r.addEventListener("stop",(()=>this.#h())),this.fireEx({sEvent:"OnConnect",aParams:[this.#r.state],tActionData:{mimeType:this.#r.mimeType,videoBitsPerSecond:this.#r.videoBitsPerSecond,audioBitsPerSecond:this.#r.audioBitsPerSecond,audioBitrateMode:this.#r.audioBitrateMode??"",tracks:r}})}catch(e){this.fire("OnError",[e.name,e.message])}}#p(){const e={};return""!==this.psMimeType&&(e.mimeType=this.psMimeType),0!==this.piAudioBitsPerSecond&&(e.audioBitsPerSecond=this.piAudioBitsPerSecond),0!==this.piVideoBitsPerSecond&&(e.videoBitsPerSecond=this.piVideoBitsPerSecond),0!==this.piBitsPerSecond&&(e.bitsPerSecond=this.piBitsPerSecond),-1!==this.peAudioBitrateMode&&(e.audioBitrateMode=E[this.peAudioBitrateMode]),0!==this.pnVideoKeyFrameIntervalDuration&&(e.videoKeyFrameIntervalDuration=this.pnVideoKeyFrameIntervalDuration),0!==this.piVideoKeyFrameIntervalCount&&(e.videoKeyFrameIntervalCount=this.piVideoKeyFrameIntervalCount),e}start(e){e&&(e=df.toInt(e)),this.#r?.start(e)}stop(){this.#r?.stop()}pause(){this.#r?.pause()}resume(){this.#r?.resume()}requestData(){this.#r?.requestData()}disconnect(){this.#s?.forEach((e=>e.disconnect())),this.#s=null,this.#r=null,this.fire("OnDisconnect")}attachRecording(e){const t=document.getElementById(e);this.#n&&t&&(t.srcObject=null,t.src=this.#n)}async#d(e){this.#i.push(e.data),this.fireEx({sEvent:"OnDataAvailable",aParams:[e.data],bSkipServer:!0});const{promise:t,resolve:r}=Promise.withResolvers();this.#o=t;try{const t=await s(e.data);this.fireEx({sEvent:"OnDataAvailable",aParams:[t],bSkipClient:!0})}catch(e){this.fire("OnError",[e.name,e.message])}r(),this.#o=null}async#h(){await this.#o,this.#n&&URL.revokeObjectURL(this.#n);const e=new Blob(this.#i,{type:this.#i[0].type});this.#n=URL.createObjectURL(e),this.#i=[],this.fire("OnStop",[this.#r?.state??""])}set_paMediaStreams(e){this.#t=df.sys.vt.deserialize(e,[df.tString]),Array.isArray(this.#t)||(this.#t=[])}get_paMediaStreams(){return df.sys.vt.serialize(this.#t,[df.tString])}}function M(e,t){return void 0!==e&&e!==1/0?e:t}class A extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.prop(df.tNumber,"pnDownlink",0),this.prop(df.tNumber,"pnDownlinkMax",0),this.prop(df.tString,"psEffectiveType",""),this.prop(df.tInt,"piRTT",0),this.prop(df.tBool,"pbSaveData",!1),this.prop(df.tString,"psType",""),this.event("OnNetworkChange",df.cCallModeDefault)}create(e){super.create(e),this.set("pbIsSupported","connection"in navigator),this.pbIsSupported&&(this.update(),navigator.connection.addEventListener("change",(()=>{this.update(),this.fire("OnNetworkChange")})))}update(){const e=navigator.connection;this.set("pnDownlink",M(e.downlink,0)),this.set("pnDownlinkMax",M(e.downlinkMax,0)),this.set("psEffectiveType",M(e.effectiveType,"")),this.set("piRTT",M(e.rtt,0)),this.set("pbSaveData",M(e.saveData,!1)),this.set("psType",M(e.type,""))}}const R=[];class F extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.prop(df.tString,"psPermission",""),this.event("OnPermissionChange",df.cCallModeDefault),this.event("OnClick",df.cCallModeDefault),this.event("OnClose",df.cCallModeDefault),this.event("OnError",df.cCallModeDefault),this.event("OnShow",df.cCallModeDefault)}create(e){super.create(e),this.set("pbIsSupported","Notification"in window),this.pbIsSupported&&this.set("psPermission",Notification.permission)}async requestPermission(){const e=await Notification.requestPermission();this.set("psPermission",e),this.fire("OnPermissionChange")}createNotification(){const e=this._tActionData;try{const t=new Notification(e.sTitle,{dir:e.sDir||void 0,lang:e.sLang||void 0,badge:e.sBadge||void 0,body:e.sBody||void 0,tag:e.sTag||void 0,icon:e.sIcon||void 0,image:e.sImage||void 0,data:e.data||void 0,vibrate:e.aVibrate,renotify:e.bReNotify,requireInteraction:e.bRequireInteraction,silent:e.bSilent});t.addEventListener("click",(()=>this.fire("OnClick",[e.id]))),t.addEventListener("close",(()=>this.fire("OnClose",[e.id]))),t.addEventListener("error",(t=>this.fire("OnError",[e.id,t.message]))),t.addEventListener("show",(()=>this.fire("OnShow",[e.id]))),R.push({id:e.id,notification:t})}catch(t){this.fire("OnError",[e.id,t.message])}}closeNotification(e){const t=parseInt(e,10),s=R.find((e=>e.id===t));s&&(s.notification.close(),R.splice(R.indexOf(s),1))}}class x extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.event("OnVisibilityChange",df.cCallModeDefault)}create(e){super.create(e),this.set("pbIsSupported",void 0!==document.visibilityState),this.pbIsSupported&&document.addEventListener("visibilitychange",(()=>{this.fire("OnVisibilityChange",[document.visibilityState])}))}}class L extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.event("OnChange"),this.event("OnLock"),this.event("OnError")}create(e){super.create(e),this.set("pbIsSupported",void 0!==window?.screen?.orientation),this.pbIsSupported&&window.screen.orientation.addEventListener("change",(e=>{this.fire("OnChange",[e.target.type,e.target.angle])}))}async lock(e){try{await window.screen.orientation.lock(e),requestIdleCallback((()=>this.fire("OnLock",[window.screen.orientation.type])))}catch(e){this.fire("OnError",[e.name,e.message])}}unlock(){try{window.screen.orientation.unlock()}catch(e){this.fire("OnError",[e.name,e.message])}}}class B extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.event("OnSuccess",df.cCallModeDefault),this.event("OnError",df.cCallModeDefault),this.event("OnRelease",df.cCallModeDefault)}create(e){super.create(e),this.set("pbIsSupported","wakeLock"in navigator)}async request(){try{this._wakeLock=await navigator.wakeLock.request("screen"),this._wakeLock.addEventListener("release",(()=>this.fire("OnRelease"))),this.fire("OnSuccess")}catch(e){this.fire("OnError",[e.name,e.message])}}async release(){this._wakeLock&&(await this._wakeLock.release(),this._wakeLock=null)}}class k extends df.WebObject{#u;#l;#f=[];constructor(e,t,s){super(e,t),this.#u=s,this.prop(df.tBool,"pbIsSupported",!1),this.event("OnActivate"),this.event("OnReading"),this.event("OnError")}get sensor(){return this.#l}set sensor(e){e.addEventListener("activate",(()=>this.fire("OnActivate"))),e.addEventListener("reading",(()=>this.fire("OnReading",this.reading))),e.addEventListener("error",(e=>this.fire("OnError",[e.error.name,e.error.message]))),this.#l=e}createSensor(e){if(this.stop(),this.pbIsSupported)try{this.sensor=new this.#u(e)}catch(e){this.fire("OnError",[e.name,e.message])}}get reading(){return[]}configurePermission(e,t,s){this.prop(df.tString,t,""),this.event(s),this.#f.push([e,t,s])}async start(){const e=this.#f.map((e=>r(this,...e)));(await Promise.all(e)).every((e=>"granted"===e))?this.#l?.start():this.fire("OnError",["SensorPermissionError","No permission to use this sensor"])}stop(){this.#l?.stop()}destroy(){this.stop(),super.destroy()}}class j extends k{constructor(e,t,s){super(e,t,s),this.prop(df.tNumber,"pnFrequency",1)}set_pnFrequency(e){this.createSensor({frequency:e})}}class T extends j{constructor(e,t,s){super(e,t,s),this.prop(df.tString,"psReferenceFrame","device")}set_pnFrequency(e){this.createSensor({frequency:e,referenceFrame:this.psReferenceFrame})}set_psReferenceFrame(e){this.createSensor({frequency:this.pnFrequency,referenceFrame:e})}}class q extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1)}create(e){super.create(e),this.set("pbIsSupported","vibrate"in navigator)}vibrate(){navigator.vibrate(arguments)}}class W extends df.WebObject{constructor(e,t){super(e,t),this.prop(df.tBool,"pbIsSupported",!1),this.event("OnSuccess",df.cCallModeDefault),this.event("OnError",df.cCallModeDefault)}create(e){super.create(e),this.set("pbIsSupported","share"in navigator)}async share(e,t,s){const r={text:e||void 0,title:t||void 0,url:s};try{const e=await Promise.all(this._tActionData?.aFiles?.map((e=>this.toFile(e)))||[]);if(e.length>0){if(!navigator.canShare?.({files:e}))throw{name:"CantShareError",message:"These files can't be shared"};r.files=e}await navigator.share(r),this.fire("OnSuccess")}catch(e){this.fire("OnError",[e.name,e.message])}}async toFile(e){const t=await fetch(e.sURL,{credentials:"same-origin"}),s=await t.blob();return new File([s],e.sName,{type:e.sContentType})}}class N extends df.WebObject{#m;constructor(e,t,s){super(e,t),this.#m=s,this.prop(df.tBool,"pbIsSupported",!1),this.prop(df.tInt,"piLength",0)}create(e){super.create(e),this.set("pbIsSupported",function(e){let t;try{t=window[e];const s="__storage_test__";return t.setItem(s,s),t.removeItem(s),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}(this.#m)),this.pbIsSupported&&(this.#m=window[this.#m],this.#g())}#g(){this.set("piLength",this.#m.length)}#a(e){const t=this.getWebApp().findObj(e);if(!t)throw new df.Error(999,"Return WebObject not found '{{0}}'",this,[e]);return t}#c(e,t){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];this.#a(e).serverAction(t,r)}key(e,t,s){this.#c(e,t,this.#m.key(parseInt(s)))}getItem(e,t,s){const r=this.#m.getItem(s);null!==r&&this.#c(e,t,r)}setItem(e,t){this.#m.setItem(e,t),this.#g()}removeItem(e){this.#m.removeItem(e),this.#g()}clear(){this.#m.clear(),this.#g()}}e.g.WebAPIs={AbsoluteOrientationSensor:class extends T{constructor(e,t){super(e,t,window.AbsoluteOrientationSensor),this.configurePermission("accelerometer","psAccelerometerPermission","OnAccelerometerPermissionChange"),this.configurePermission("magnetometer","psMagnetometerPermission","OnMagnetometerPermissionChange"),this.configurePermission("gyroscope","psGyroscopePermission","OnGyroscopePermissionChange")}create(e){super.create(e),this.set("pbIsSupported","AbsoluteOrientationSensor"in window),this.createSensor({frequency:this.pnFrequency,referenceFrame:this.psReferenceFrame})}get reading(){return this.sensor.quaternion}},AccelerometerSensor:class extends T{constructor(e,t){super(e,t,window.Accelerometer),this.configurePermission("accelerometer","psAccelerometerPermission","OnAccelerometerPermissionChange")}create(e){super.create(e),this.set("pbIsSupported","Accelerometer"in window),this.createSensor({frequency:this.pnFrequency,referenceFrame:this.psReferenceFrame})}get reading(){return[this.sensor.x,this.sensor.y,this.sensor.z]}},AmbientLightSensor:class extends j{constructor(e,t){super(e,t,window.AmbientLightSensor),this.configurePermission("ambient-light-sensor","psAmbientLightSensorPermission","OnAmbientLightSensorPermissionChange")}create(e){super.create(e),this.set("pbIsSupported","AmbientLightSensor"in window),this.createSensor({frequency:this.pnFrequency})}get reading(){return[this.sensor.illuminance]}},BroadcastChannel:t,Clipboard:i,ContactPicker:n,CredentialManagement:o,DisplayMediaStream:class extends C{constructor(e,t){super(e,t),this.prop(df.tBool,"pbAudio",!1),this.prop(df.tBool,"pbMonitorTypeSurfaces",!0),this.prop(df.tBool,"pbPreferCurrentTab",!1),this.prop(df.tBool,"pbSelfBrowserSurface",!1),this.prop(df.tBool,"pbSurfaceSwitching",!1),this.prop(df.tBool,"pbSystemAudio",!0),this.prop(df.tInt,"peDisplaySurface",p)}create(e){super.create(e),this.set("pbIsSupported","mediaDevices"in navigator&&navigator.mediaDevices.getDisplayMedia)}async connect(){return this.disconnect(),this.stream=await navigator.mediaDevices.getDisplayMedia(this.#v())}#v(){const e={audio:this.pbAudio,monitorTypeSurfaces:O[this.pbMonitorTypeSurfaces],preferCurrentTab:this.pbPreferCurrentTab,selfBrowserSurface:O[this.pbSelfBrowserSurface],surfaceSwitching:O[this.pbSurfaceSwitching],systemAudio:O[this.pbSystemAudio]};return this.peDisplaySurface!==p&&(e.video={displaySurface:w[this.peDisplaySurface]}),e}},EyeDropper:a,Fullscreen:c,GravitySensor:class extends T{constructor(e,t){super(e,t,window.GravitySensor),this.configurePermission("accelerometer","psAccelerometerPermission","OnAccelerometerPermissionChange")}create(e){super.create(e),this.set("pbIsSupported","GravitySensor"in window),this.createSensor({frequency:this.pnFrequency,referenceFrame:this.psReferenceFrame})}get reading(){return[this.sensor.x,this.sensor.y,this.sensor.z]}},GyroscopeSensor:class extends T{constructor(e,t){super(e,t,window.Gyroscope),this.configurePermission("gyroscope","psGyroscopePermission","OnGyroscopePermissionChange")}create(e){super.create(e),this.set("pbIsSupported","Gyroscope"in window),this.createSensor({frequency:this.pnFrequency,referenceFrame:this.psReferenceFrame})}get reading(){return[this.sensor.x,this.sensor.y,this.sensor.z]}},LinearAccelerationSensor:class extends T{constructor(e,t){super(e,t,window.LinearAccelerationSensor),this.configurePermission("accelerometer","psAccelerometerPermission","OnAccelerometerPermissionChange")}create(e){super.create(e),this.set("pbIsSupported","LinearAccelerationSensor"in window),this.createSensor({frequency:this.pnFrequency,referenceFrame:this.psReferenceFrame})}get reading(){return[this.sensor.x,this.sensor.y,this.sensor.z]}},LocalStorage:class extends N{constructor(e,t){super(e,t,"localStorage"),this.event("OnStorage")}create(e){super.create(e),this.pbIsSupported&&window.addEventListener("storage",(e=>{console.log(e),this.fire("OnStorage",[e.key||"",e.newValue||"",e.oldValue||"",e.url])}))}},MagnetometerSensor:class extends T{constructor(e,t){super(e,t,window.Magnetometer),this.configurePermission("magnetometer","psMagnetometerPermission","OnMagnetometerPermissionChange")}create(e){super.create(e),this.set("pbIsSupported","Magnetometer"in window),this.createSensor({frequency:this.pnFrequency,referenceFrame:this.psReferenceFrame})}get reading(){return[this.sensor.x,this.sensor.y,this.sensor.z]}},MediaStreamRecording:D,NetworkInformation:A,Notifications:F,PageVisibility:x,RelativeOrientationSensor:class extends T{constructor(e,t){super(e,t,window.RelativeOrientationSensor),this.configurePermission("accelerometer","psAccelerometerPermission","OnAccelerometerPermissionChange"),this.configurePermission("gyroscope","psGyroscopePermission","OnGyroscopePermissionChange")}create(e){super.create(e),this.set("pbIsSupported","RelativeOrientationSensor"in window),this.createSensor({frequency:this.pnFrequency,referenceFrame:this.psReferenceFrame})}get reading(){return this.sensor.quaternion}},ScreenOrientation:L,ScreenWakeLock:B,SessionStorage:class extends N{constructor(e,t){super(e,t,"sessionStorage")}},UserMediaStream:class extends C{constructor(e,t){super(e,t),this.prop(df.tString,"psMicrophonePermission",""),this.prop(df.tString,"psCameraPermission",""),this.prop(df.tBool,"pbAudio",!1),this.prop(df.tString,"psAudioDeviceId",""),this.prop(df.tInt,"peAutoGainControl",p),this.prop(df.tInt,"piChannelCount",p),this.prop(df.tInt,"peEchoCancellation",p),this.prop(df.tNumber,"pnLatency",p),this.prop(df.tInt,"peNoiseSuppression",p),this.prop(df.tInt,"piSampleRate",p),this.prop(df.tInt,"piSampleSize",p),this.prop(df.tBool,"pbVideo",!1),this.prop(df.tString,"psVideoDeviceId",""),this.prop(df.tNumber,"pnAspectRatio",p),this.prop(df.tInt,"peFacingMode",p),this.prop(df.tNumber,"pnFrameRate",p),this.prop(df.tInt,"piHeight",p),this.prop(df.tInt,"piWidth",p),this.prop(df.tInt,"peResizeMode",p),this.event("OnMicrophonePermissionChange"),this.event("OnCameraPermissionChange"),this.event("OnEnumerateDevices",df.cCallModeDefault,"OnEnumerateDevicesProxy")}create(e){super.create(e),this.set("pbIsSupported","mediaDevices"in navigator&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.enumerateDevices),this.pbIsSupported&&"permissions"in navigator&&(r(this,"microphone","psMicrophonePermission","OnMicrophonePermissionChange"),r(this,"camera","psCameraPermission","OnCameraPermissionChange"))}async requestPermission(){try{(await navigator.mediaDevices.getUserMedia({audio:this.pbAudio,video:this.pbVideo})).getTracks().forEach((e=>e.stop()))}catch(e){this.fire("OnError",[e.name,e.message])}}async enumerateDevices(){try{const e=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"audioinput"===e.kind||"videoinput"===e.kind));this.fireEx({sEvent:"OnEnumerateDevices",tActionData:e})}catch(e){this.fire("OnError",[e.name,e.message])}}async connect(){return this.disconnect(),this.stream=await navigator.mediaDevices.getUserMedia(this.#v())}#v(){const e={};return this.pbAudio&&(e.audio={},this.psAudioDeviceId&&(e.audio.deviceId=this.psAudioDeviceId),this.peAutoGainControl!==p&&(e.audio.autoGainControl=1===this.peAutoGainControl),this.piChannelCount!==p&&(e.audio.channelCount=this.piChannelCount),this.peEchoCancellation!==p&&(e.audio.echoCancellation=1===this.peEchoCancellation),this.pnLatency!==p&&(e.audio.latency=this.pnLatency),this.peNoiseSuppression!==p&&(e.audio.noiseSuppression=1===this.peNoiseSuppression),this.piSampleRate!==p&&(e.audio.sampleRate=this.piSampleRate),this.piSampleSize!==p&&(e.audio.sampleSize=this.piSampleSize)),this.pbVideo&&(e.video={},this.psVideoDeviceId&&(e.video.deviceId=this.psVideoDeviceId),this.pnAspectRatio!==p&&(e.video.aspectRatio=this.pnAspectRatio),this.peFacingMode!==p&&(e.video.facingMode=S[this.peFacingMode]),this.pnFrameRate!==p&&(e.video.frameRate=this.pnFrameRate),this.piHeight!==p&&(e.video.height=this.piHeight),this.piWidth!==p&&(e.video.width=this.piWidth),this.peResizeMode!==p&&(e.video.resizeMode=y[this.peResizeMode])),e}},Vibration:q,WebShare:W}}();
//# sourceMappingURL=index.js.map